{"version":3,"sources":["hooks/useServiceHooks.tsx","components/header/index.tsx","pages/my/assets/avatar.png","pages/chat/component/leftChat.tsx","pages/chat/component/rightChat.tsx","utils/dataTime.ts","pages/chat/component/chatTime.tsx","pages/chat/component/content.tsx","pages/chat/entity.ts","pages/chat/component/emoji.tsx","pages/chat/component/inputer.tsx","pages/groups/assets/choosen.png","pages/groups/components/DeleteMember.tsx","pages/groups/components/AddMember.tsx","pages/groups/components/GroupMore.tsx","pages/groups/assets/addMember.png","pages/groups/assets/deleteMember.png","pages/chat/index.tsx","request/request.ts","utils/websocket.ts","request/api.ts","pages/login/request.ts","utils/observerListen.ts","assets/img/logo.png","components/download/index.tsx","assets/img/cancel.png","pages/login/index.tsx","pages/register/component/regOne.tsx","pages/register/component/regTwo.tsx","pages/register/request.ts","assets/img/visible.png","assets/img/invisible.png","pages/register/component/regThree.tsx","pages/register/index.tsx","components/navBar/config.ts","components/navBar/index.tsx","pages/groups/request.ts","pages/friends/request.ts","pages/messages/request.ts","pages/messages/index.tsx","pages/friends/assets/cancel.png","pages/friends/components/AddFriendHeader.tsx","pages/friends/assets/search.png","pages/friends/components/AddFriend.tsx","pages/friends/assets/search2.png","pages/friends/index.tsx","pages/groups/components/CreateGroup.tsx","pages/groups/assets/camera.png","pages/groups/index.tsx","pages/my/request.ts","pages/my/components/ChangePassword.tsx","pages/my/index.tsx","pages/my/assets/pencil.png","pages/my/assets/fuzhi.png","pages/my/assets/headset.png","pages/my/assets/link.png","pages/iosDownload/assets/guid.png","pages/iosDownload/index.tsx","routers.ts","utils/authRoute.tsx","App.tsx","store/common/index.ts","store/message/index.ts","store/user/index.ts","utils/storage.tsx","pages/friends/store.ts","pages/groups/store.ts","pages/register/store.ts","store/index.ts","registerServiceWorker.ts","index.tsx","proto/proto.js"],"names":["useOnlineServiceHooks","useState","onlineService","onService","a","document","createElement","setAttribute","getElementById","body","appendChild","click","HeaderBar","props","history","useHistory","goback","useServiceHooks","title","rightIcon","service","search","className","onClick","replace","inject","observer","data","user","userState","url","imgUrl","avatar","src","onError","e","target","onerror","defaultAvatar","dangerouslySetInnerHTML","__html","msgContent","chatDateTimeFormate","date","dayjs","format","mmddhhmmss_zh","ChatTime","time","datas","setPage","page","isLastPage","chatBody","useRef","displayTime","b","date1","Date","parse","createTime","diff","ref","map","item","index","html","emoji","emojiId","slice","length","uid","senderUid","emojiList","code","Emoji","selectEmoji","onBlur","Inputer","sendMsg","friendUid","text","setText","displayEmoji","setDisplayEmoji","emojiCode","placeholder","value","onChange","changeText","type","preventDefault","display","setDisplay","groupsState","isChoose","setisChoose","getDeleteGroupMembers","currentChat","ids","setIds","useEffect","obj","allMemberIds","Object","keys","key","objectKeys","groupId","id","chooseFriends","choosen","alt","name","getAddGroupMembers","friendsState","groupMembers","friendsData","deleteDisplay","setDeleteDisplay","addDisplay","setAddDisplay","isAuth","setIsAuth","addDeltitle","setAddDelTitle","find","rank","account","DeleteMember","AddMember","getHistory","clearHisotry","groupMoreDisplay","setGroupMoreDisplay","getGroupMembers","setCurrentChat","reqeust","axios","create","timeout","transformRequest","JSON","stringify","transformResponse","startsWith","interceptors","request","use","config","sessionStorage","getItem","sid","headers","SID","UID","error","msg","Promise","resolve","response","errorHandle","reject","message","webSocketPingTimer","clear","window","location","fail","get","params","api","method","post","login","WSBaseReqProto","protoRoot","lookup","WSBaseResProto","MyWs","ws","connect","Ws","debug","open","onopen","event","loginWs","webSocketPing","close","addEventListener","console","log","reconnect","userStr","payload","send","wsData","buffer","encode","finish","onmessage","reader","FileReader","readAsArrayBuffer","onload","buf","Uint8Array","result","decode","dispatchEvent","this","setTimeout","clearTimeout","str","ObserverListen","handlers","handler","push","parasm","Error","forEach","idx","findIndex","ele","splice","listen","addListenr","showDownLoadLink","setShowDownLoadLink","isIosLink","setIsIosLink","isIos","useragent","navigator","userAgent","regex","RegExp","join","Boolean","match","isWebview","style","bottom","loginPage","downlogo","to","href","download","inputRef","nickname","setNickname","password","setPassword","updateUser","autoFocus","loading","pwd","then","res","isLogin","hide","success","catch","err","registerState","phoneNumber","register","changePhoneNum","changeStep","pattern","timing","setTiming","second","setSecond","setCode","interval","setInterval","preSecond","clearInterval","viliCode","setPwd","verifyPwd","setVerifyPwd","recommend","setRecommend","isPasswordVisible","setIsPasswordVisible","isConfirmPasswordVisible","setIsConfirmPasswordVisible","lastIndexOf","substring","saveUser","phone","visibleImg","invisibleImg","step","icon","iconCheck","path","useLocation","commonState","total","msgState","curretn","current","updateFooterHeight","clientHeight","pathname","sendGroupMsg","uploadImg","upload","searchFriendByAccount","reqNo","timeStamp","agreeOrDeclineFriend","status","sendMessage","clearMsgByGroup","groupStateLastPage","groupHisitory","messagesHistory","groupHisotrys","clearGroupHisotry","groupSelfMsg","myselfMsg","sentUserUid","setSentUserUid","setFriendsCurrentChat","getMessageHistory","friendHisitory","clearFriendHisotry","friendSelfMsg","friendsStateLastPage","msgHisotry","addHistoryItem","init","initMessags","setCurrentChatByMsgStore","check","setCheck","initUserList","lastMsgContent","remark","unMsgCount","modifiedTime","dataTime","initGroupList","group","lastMsgTime","clearFriend","clearMsgByFriend","clearGroup","receiverUid","array","sort","t1","getTime","objToArray","groupAvatar","toChat","groupdData","msgType","friendData","receiveId","friendAccount","friendResult","setFriendResult","setFriendAccount","searchFriend","isOnFocus","setIsOnFocus","onSubmit","onFocus","zIndex","cancelImg","addFriendByUid","toString","info","AddFriendHeader","updateFriendsAdded","friendsAddedData","getUpdateFriendsAddedList","getFriendList","displayChat","setDisplayChat","agreeOrDecline","filter","checkFriend","postData","refreshData","isInput","setIsInput","groupInfo","setGroupInfo","setCount","accept","multiple","files","file","FormData","append","add","getGroupList","groupsData","checkGroup","changeName","ChangePassword","setDisplayPwd","done","setDone","oldPwd","newPwd","confirmPwd","goBack","confirm","host","hostname","displayPwd","setName","avatarEdit","nameEdit","action","onCopy","logout","reload","iosDownLoad","routeMap","component","Login","auth","Register","Chat","Messages","Friends","Groups","My","guidImg","targetRoute","routers","duration","App","CommonState","makeObservable","observable","documentElement","num","footerHeight","MessageState","updateGroup","isLive","autorun","update","newGroup","kickedByGroup","keyAddGroupKey","tempData","groupName","loginUser","computed","UserState","remoteLogin","param","recommendMatchNum","redListHits","setItem","getUser","uesrStr","FriendsState","reqAddedFriends","dataIndex","latest","finalPage","shift","msgId","undefined","friendId","userStorage","unshift","ext","msgData","GroupsState","getGroupMembersByGroupId","uids","deleteGroupMembers","addGroupMembers","RegisterState","val","mobilePhone","store","MsgState","isLocalhost","registerValidSW","swUrl","serviceWorker","registration","onupdatefound","installingWorker","installing","onstatechange","state","controller","ReactDOM","render","Store","URL","process","origin","fetch","indexOf","ready","unregister","checkValidServiceWorker","registerServiceWorker","$protobuf","require","$root","roots","Root","addJSON","protocol","options","optimize_for","java_package","nested","fields","WSMessageResProto","WSUserResProto","receiveAvatar","module","exports"],"mappings":"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","file":"static/js/main.8824359e.chunk.js","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\n\r\nconst useOnlineServiceHooks = () => {\r\n const [onlineService] = useState(\"http://ayx.ltd/kefu/5fe0753addc8c\");\r\n const onService = () => {\r\n  let a = document.createElement(\"a\");\r\n  a.setAttribute(\"href\", onlineService);\r\n  a.setAttribute(\"target\", \"_blank\");\r\n  a.setAttribute(\"id\", \"online\");\r\n  // 防止反复添加\r\n  if (!document.getElementById('online')) {\r\n   document.body.appendChild(a);\r\n  }\r\n  a.click();\r\n }\r\n return { onService, onlineService };\r\n}\r\nexport default useOnlineServiceHooks;","import React from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport useServiceHooks from \"@hooks/useServiceHooks\";\r\nimport \"./style.scss\";\r\nexport type HeaderBarProps = {\r\n  goback?: string | (() => void);\r\n  title: string;\r\n  service?: string;\r\n  rightIcon?: Function | null;\r\n  search?: boolean;\r\n};\r\nconst HeaderBar = (props: HeaderBarProps) => {\r\n  let history = useHistory();\r\n  let { onService } = useServiceHooks();\r\n  const { goback, title, service, rightIcon, search } = props;\r\n  const to = () => {\r\n    if (typeof goback === \"function\") {\r\n      goback();\r\n    } else {\r\n      if (goback) history.replace(goback);\r\n    }\r\n  };\r\n  return (\r\n    <header className=\"header-wrap\">\r\n      <ul className=\"container\">\r\n        {goback ? <li className=\"goback\" onClick={to}></li> : <li></li>}\r\n        <li className=\"title\">{title}</li>\r\n        {rightIcon ? rightIcon() : <li></li>}\r\n      </ul>\r\n    </header>\r\n  );\r\n};\r\nexport default HeaderBar;\r\n","export default \"data:image/png;base64,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\"","import React, { useState } from \"react\";\r\nimport { observer, inject } from \"mobx-react\";\r\nimport defaultAvatar from \"@pages/my/assets/avatar.png\";\r\nconst LeftChat = (props: any) => {\r\n  const { data, userState } = props;\r\n  const { user } = userState;\r\n  let url = \"\";\r\n  // 朋友聊天\r\n  if (data.user) {\r\n    url = user.imgUrl + data.user.avatar;\r\n  } else {\r\n    url = user.imgUrl + data.avatar;\r\n  }\r\n  return (\r\n    <p className=\"left-chat\">\r\n      <a>\r\n        <img\r\n          src={url}\r\n          onError={(e: any) => {\r\n            e.target.onerror = null;\r\n            e.target.src = defaultAvatar;\r\n          }}\r\n        />\r\n      </a>\r\n      <span\r\n        className=\"text\"\r\n        dangerouslySetInnerHTML={{ __html: data.msgContent }}\r\n      ></span>\r\n    </p>\r\n  );\r\n};\r\n\r\nexport default inject(\"userState\")(observer(LeftChat));\r\n","import React from \"react\";\r\nimport { observer, inject } from \"mobx-react\";\r\nimport defaultAvatar from \"@pages/my/assets/avatar.png\";\r\nconst RightChat = (props: any) => {\r\n  const { data, userState } = props;\r\n  let url;\r\n  // 朋友聊天\r\n  if (userState.user.avatar)\r\n    url = userState.user.imgUrl + userState.user.avatar;\r\n  // 群聊天\r\n  else url = userState.user.imgUrl + userState.user.avatar;\r\n  return (\r\n    <p className=\"right-chat\">\r\n      <span\r\n        className=\"text\"\r\n        dangerouslySetInnerHTML={{ __html: data.msgContent }}\r\n      ></span>\r\n      <a>\r\n        <img\r\n          src={url}\r\n          onError={(e: any) => {\r\n            e.target.onerror = null;\r\n            e.target.src = defaultAvatar;\r\n          }}\r\n        />\r\n      </a>\r\n    </p>\r\n  );\r\n};\r\n\r\nexport default inject(\"userState\")(observer(RightChat));\r\n","import dayjs from \"dayjs\";\r\nexport const mmddhhmmss_zh = (date: string) => {\r\n  return dayjs(date).format(\"MM月DD日 HH:mm\");\r\n};\r\n\r\nexport const mmddhhmmss = (date: string) => {\r\n  return dayjs(date).format(\"MM-DD HH:mm\");\r\n};\r\n\r\nexport const yyyymmddhhmmss2 = (date: string) => {\r\n  if (date) {\r\n    return dayjs(date).format(\"MM/DD HH:mm\");\r\n  }\r\n  return \"\";\r\n};\r\nexport const chatDateTimeFormate = (date: string) => {\r\n  return mmddhhmmss_zh(date);\r\n};\r\n","import React from \"react\"\r\nimport { chatDateTimeFormate } from \"@utils/dataTime\"\r\nconst ChatTime = (props: any) => {\r\n const { time } = props;\r\n return (\r\n  <div className=\"chat-time\">\r\n   <span>{chatDateTimeFormate(time)}</span>\r\n  </div>\r\n )\r\n}\r\nexport default ChatTime;","import React, { useEffect, useRef, useState } from \"react\";\r\nimport LeftChat from \"./leftChat\";\r\nimport RightChat from \"./rightChat\";\r\nimport ChatTime from \"./chatTime\";\r\nimport { observer, inject } from \"mobx-react\";\r\nimport dayjs from \"dayjs\";\r\nconst Content = (props: any) => {\r\n  const { userState, datas, setPage, page, isLastPage } = props;\r\n  const { user } = userState;\r\n  const chatBody = useRef<any>();\r\n  const displayTime = (a: any, b: any) => {\r\n    if (!a) return true;\r\n\r\n    const date1 = dayjs(Date.parse(a.createTime));\r\n    const date2 = dayjs(Date.parse(b.createTime));\r\n\r\n    const diffMinute = date2.diff(date1, \"minute\");\r\n    return diffMinute > 2 ? true : false;\r\n  };\r\n\r\n  return (\r\n    <div className={\"chat-content reverse\"} ref={chatBody}>\r\n      <div className=\"chat-main\">\r\n        <div className=\"hide-child\">hidee</div>\r\n        {datas.map((item: any, index: number) => {\r\n          let html = item.msgContent.replace(\r\n            /:emoji\\[([^\\s\\[\\]]+?)\\]/g,\r\n            function (emoji: any) {\r\n              var emojiId = emoji.replace(/^:emoji/g, \"\");\r\n              emojiId = emojiId.slice(1, emojiId.length - 1);\r\n              return `<i class=\"emoji-icon emoji-${emojiId}\"></i>`;\r\n            }\r\n          );\r\n          item.msgContent = html;\r\n          return (\r\n            <div key={index}>\r\n              {displayTime(datas[index - 1], datas[index]) && (\r\n                <ChatTime time={item.createTime} />\r\n              )}\r\n              {user.uid === item.senderUid ? (\r\n                <RightChat data={item} />\r\n              ) : (\r\n                <LeftChat data={item} />\r\n              )}\r\n            </div>\r\n          );\r\n        })}\r\n        {!isLastPage && (\r\n          <span className=\"more-data\" onClick={() => setPage(page + 1)}>\r\n            点击加载更多\r\n          </span>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default inject(\"userState\", \"msgState\")(observer(Content));\r\n","export const emojiList = [\r\n {\r\n  title: \"微笑\",\r\n  code: \"smile\"\r\n },\r\n {\r\n  title: \"发笑\",\r\n  code: \"laughing\"\r\n },\r\n {\r\n  title: \"害羞\",\r\n  code: \"blush\"\r\n },\r\n {\r\n  title: \"心眼\",\r\n  code: \"heart_eyes\"\r\n },\r\n {\r\n  title: \"傻笑\",\r\n  code: \"smirk\"\r\n },\r\n {\r\n  title: \"激动\",\r\n  code: \"flushed\"\r\n },\r\n {\r\n  title: \"咧嘴\",\r\n  code: \"grin\"\r\n },\r\n {\r\n  title: \"亲亲\",\r\n  code: \"kissing_smiling_eyes\"\r\n },\r\n {\r\n  title: \"眨眼\",\r\n  code: \"wink\"\r\n },\r\n {\r\n  title: \"害羞的亲亲\",\r\n  code: \"kissing_closed_eyes\"\r\n },\r\n {\r\n  title: \"调皮\",\r\n  code: \"stuck_out_tongue_winking_eye\"\r\n },\r\n {\r\n  title: \"晚安\",\r\n  code: \"sleeping\"\r\n },\r\n {\r\n  title: \"担心\",\r\n  code: \"worried\"\r\n },\r\n {\r\n  title: \"激动的微信\",\r\n  code: \"sweat_smile\"\r\n },\r\n {\r\n  title: \"冷汗\",\r\n  code: \"cold_sweat\"\r\n },\r\n {\r\n  title: \"笑哭\",\r\n  code: \"joy\"\r\n },\r\n {\r\n  title: \"哭泣\",\r\n  code: \"sob\"\r\n },\r\n {\r\n  title: \"愤怒\",\r\n  code: \"angry\"\r\n },\r\n {\r\n  title: \"生病\",\r\n  code: \"mask\"\r\n },\r\n {\r\n  title: \"尖叫\",\r\n  code: \"scream\"\r\n },\r\n {\r\n  title: \"墨镜\",\r\n  code: \"sunglasses\"\r\n },\r\n {\r\n  title: \"缩略图\",\r\n  code: \"thumbsup\"\r\n },\r\n {\r\n  title: \"鼓掌\",\r\n  code: \"clap\"\r\n },\r\n {\r\n  title: \"OK\",\r\n  code: \"ok_hand\"\r\n }\r\n]","import React, { useState } from \"react\";\r\nimport { emojiList } from \"../entity\";\r\nconst Emoji = (props: any) => {\r\n  const { selectEmoji } = props;\r\n  return (\r\n    <nav className=\"emojis\" onBlur={() => {}}>\r\n      {emojiList.map((item) => {\r\n        return (\r\n          <i\r\n            className={`emoji-icon emoji-${item.code}`}\r\n            key={item.code}\r\n            onClick={() => selectEmoji(item.code)}\r\n          ></i>\r\n        );\r\n      })}\r\n    </nav>\r\n  );\r\n};\r\nexport default Emoji;\r\n","import React, { ChangeEvent, useState } from \"react\";\r\nimport Emoji from \"./emoji\";\r\ntype InputerProps = {\r\n  sendMsg: Function;\r\n  friendUid?: number | undefined;\r\n};\r\nconst Inputer = (props: InputerProps) => {\r\n  const { sendMsg, friendUid } = props;\r\n  let [text, setText] = useState(\"\");\r\n  const [displayEmoji, setDisplayEmoji] = useState(false);\r\n  const send = () => {\r\n    if (!text) return;\r\n    sendMsg(text, friendUid);\r\n    setText(\"\");\r\n  };\r\n\r\n  const changeText = (e: ChangeEvent<HTMLTextAreaElement>) => {\r\n    setText(e.target.value);\r\n  };\r\n  const displayEmojiFn = () => {\r\n    setDisplayEmoji(!displayEmoji);\r\n  };\r\n\r\n  const selectEmoji = (emojiCode: string) => {\r\n    setText((text += \":emoji[\" + emojiCode + \"]\"));\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <form className=\"inputer\">\r\n        {displayEmoji && <Emoji selectEmoji={selectEmoji} />}\r\n        <textarea\r\n          placeholder=\"消息\"\r\n          value={text}\r\n          onChange={(e) => {\r\n            changeText(e);\r\n          }}\r\n        />\r\n        <span className=\"emoji\" onClick={displayEmojiFn}></span>\r\n        <button\r\n          type=\"submit\"\r\n          className={`${text ? \"send\" : \"\"}`}\r\n          onClick={(e) => {\r\n            e.preventDefault();\r\n            send();\r\n            setDisplayEmoji(false);\r\n          }}\r\n        >\r\n          发送\r\n        </button>\r\n      </form>\r\n\r\n      {/* <ul className=\"other-funs\">\r\n    <li className=\"emoji\"></li>\r\n    <li className=\"file\"></li>\r\n    <li></li>\r\n   </ul> */}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Inputer;\r\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAASCAYAAABIB77kAAABXklEQVRIS7WVuy4GURSFv+1SaTQKj4BEopQIL6DzCMIDuCXiJ1FJXJ5BrXGrPIFKoXaJErVGJGzZkz2T45g7M9UU55xv1tprnRE6flR1EJgEhoBb6ZKnqv3AHLAHfAKLnQEdNgscAuPAKbDRCTCAHQATwDmwAzwmQFXtE5Gv/7A3gpmyC4OJyL2dL6o6DEwDb8CNiLy3BQcz23cbE2Ui8pCeaUCTfOwp2jX5IvLRFBrAzMax1MYQliocATYtQcALsN0UmhOQs1hZqNDmOAqsAEvAK9CrC3XYDHDkAbGZ9WJlGTB9UVWDrjaBBjCLvo3m0hxKA5I3lh+1aAJtA0tmGH9FHWhbWC7Qe1lo719ghcAIuuzp3QKugKkoIFmp61Sp9Gpze9e9Ms/ACTBf1rMqaOVd6tA1T6+tH/BSWxqzG6QK9KsWZRsCpQvAtUe/Max0hgXptR/pnYg81VUUr/sGnb2mW8wfeoUAAAAASUVORK5CYII=\"","import React, { useState, useEffect } from \"react\";\r\nimport Header from \"@components/header\";\r\nimport choosen from \"../assets/choosen.png\";\r\nimport { observer, inject } from \"mobx-react\";\r\nimport defaultAvatar from \"@pages/my/assets/avatar.png\";\r\nfunction AddDeleteMember(props: any) {\r\n  const { display, setDisplay, title, datas, userState, groupsState } = props;\r\n  const [isChoose, setisChoose] = useState<any>({});\r\n  const { getDeleteGroupMembers, currentChat } = groupsState;\r\n  const [ids, setIds] = useState(\"\");\r\n  const chooseFriends = (id: number) => {\r\n    let obj = isChoose;\r\n    if (isChoose[id]) {\r\n      delete obj[id];\r\n      setisChoose({ ...obj });\r\n    } else setisChoose({ ...isChoose, [id]: id });\r\n  };\r\n  const objectKeys = (obj: any) => {\r\n    let allMemberIds = \"\";\r\n    Object.keys(obj).map(function (key, index) {\r\n      allMemberIds += `${key},`;\r\n    });\r\n    setIds(allMemberIds);\r\n  };\r\n  useEffect(() => {\r\n    objectKeys(isChoose);\r\n  }, [isChoose]);\r\n\r\n  const deleteMember = () => {\r\n    return (\r\n      <button\r\n        className=\"agree_button\"\r\n        onClick={() => {\r\n          getDeleteGroupMembers(ids, currentChat.groupId);\r\n          // 恢復初始\r\n          setDisplay(false);\r\n          setisChoose({});\r\n        }}\r\n      >\r\n        完成\r\n      </button>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div\r\n      className={\r\n        display ? \"create_group_container addGroup\" : \"create_group_container\"\r\n      }\r\n    >\r\n      <Header\r\n        title={title}\r\n        goback={() => setDisplay(false)}\r\n        rightIcon={Object.keys(isChoose).length ? deleteMember : null}\r\n      />\r\n      <div className=\"newgroups_container\">\r\n        {datas.map((item: any) => {\r\n          let url = userState.user.imgUrl + item.user.avatar;\r\n\r\n          return (\r\n            <div\r\n              className=\"single_newgroup\"\r\n              key={item.user.uid}\r\n              onClick={() => chooseFriends(item.user.uid)}\r\n            >\r\n              <div\r\n                className={`${\r\n                  isChoose[item.user.uid] ? \"friendsChoosen\" : \"option\"\r\n                }`}\r\n              >\r\n                {isChoose[item.user.uid] && <img src={choosen} alt=\"choosen\" />}\r\n              </div>\r\n              <div className=\"avatar\">\r\n                <img\r\n                  src={url}\r\n                  alt=\"\"\r\n                  onError={(e: any) => {\r\n                    e.target.onerror = null;\r\n                    e.target.src = defaultAvatar;\r\n                  }}\r\n                />\r\n              </div>\r\n              <div className=\"single_newgroup_content\">\r\n                <p className=\"newgroup_name\">{item.user.name}</p>\r\n              </div>\r\n            </div>\r\n          );\r\n        })}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default inject(\"userState\", \"groupsState\")(observer(AddDeleteMember));\r\n","import React, { useState, useEffect } from \"react\";\r\nimport Header from \"@components/header\";\r\nimport choosen from \"../assets/choosen.png\";\r\nimport { observer, inject } from \"mobx-react\";\r\nimport defaultAvatar from \"@pages/my/assets/avatar.png\";\r\nfunction AddDeleteMember(props: any) {\r\n  const { display, setDisplay, title, datas, userState, groupsState } = props;\r\n  const [isChoose, setisChoose] = useState<any>({});\r\n  const { getAddGroupMembers, currentChat } = groupsState;\r\n  const [ids, setIds] = useState(\"\");\r\n  const chooseFriends = (id: number) => {\r\n    let obj = isChoose;\r\n    if (isChoose[id]) {\r\n      delete obj[id];\r\n      setisChoose({ ...obj });\r\n    } else setisChoose({ ...isChoose, [id]: id });\r\n  };\r\n  const addMember = () => {\r\n    return (\r\n      <button\r\n        className=\"agree_button\"\r\n        onClick={() => {\r\n          getAddGroupMembers(ids, currentChat.groupId);\r\n          // 恢復初始\r\n          setDisplay(false);\r\n          setisChoose({});\r\n        }}\r\n      >\r\n        完成\r\n      </button>\r\n    );\r\n  };\r\n  const objectKeys = (obj: any) => {\r\n    let allMemberIds = \"\";\r\n    Object.keys(obj).map(function (key, index) {\r\n      allMemberIds += `${key},`;\r\n    });\r\n    setIds(allMemberIds);\r\n  };\r\n  useEffect(() => {\r\n    objectKeys(isChoose);\r\n  }, [isChoose]);\r\n\r\n  return (\r\n    <div\r\n      className={\r\n        display ? \"create_group_container addGroup\" : \"create_group_container\"\r\n      }\r\n    >\r\n      <Header\r\n        title={title}\r\n        goback={() => setDisplay(false)}\r\n        rightIcon={Object.keys(isChoose).length ? addMember : null}\r\n      />\r\n      <div className=\"newgroups_container\">\r\n        {datas.map((item: any) => {\r\n          let url = userState.user.imgUrl + item.user.avatar;\r\n\r\n          return (\r\n            <div\r\n              className=\"single_newgroup\"\r\n              key={item.user.uid}\r\n              onClick={() => chooseFriends(item.user.uid)}\r\n            >\r\n              <div\r\n                className={`${\r\n                  isChoose[item.user.uid] ? \"friendsChoosen\" : \"option\"\r\n                }`}\r\n              >\r\n                {isChoose[item.user.uid] && <img src={choosen} alt=\"choosen\" />}\r\n              </div>\r\n              <div className=\"avatar\">\r\n                <img\r\n                  src={url}\r\n                  alt=\"\"\r\n                  onError={(e: any) => {\r\n                    e.target.onerror = null;\r\n                    e.target.src = defaultAvatar;\r\n                  }}\r\n                />\r\n              </div>\r\n              <div className=\"single_newgroup_content\">\r\n                <p className=\"newgroup_name\">{item.user.name}</p>\r\n              </div>\r\n            </div>\r\n          );\r\n        })}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default inject(\"userState\", \"groupsState\")(observer(AddDeleteMember));\r\n","import React, { useState, useEffect } from \"react\";\r\nimport Header from \"@components/header\";\r\nimport { observer, inject } from \"mobx-react\";\r\nimport \"./GroupMore.scss\";\r\nimport add_member from \"../assets/addMember.png\";\r\nimport delete_member from \"../assets/deleteMember.png\";\r\nimport DeleteMember from \"./DeleteMember\";\r\nimport AddMember from \"./AddMember\";\r\nimport defaultAvatar from \"@pages/my/assets/avatar.png\";\r\nfunction GroupMore(props: any) {\r\n  const {\r\n    display,\r\n    setDisplay,\r\n    groupsState,\r\n    userState,\r\n    friendsState,\r\n    title,\r\n  } = props;\r\n  const { groupMembers } = groupsState;\r\n  const { friendsData } = friendsState;\r\n  const [deleteDisplay, setDeleteDisplay] = useState(false);\r\n  const [addDisplay, setAddDisplay] = useState(false);\r\n  const [isAuth, setIsAuth] = useState(false);\r\n  const [addDeltitle, setAddDelTitle] = useState(\"\");\r\n  useEffect(() => {\r\n    groupMembers.find((item: any) => {\r\n      if (item.user.uid === userState.user.uid && item.rank !== 0) {\r\n        setIsAuth(true);\r\n      }\r\n    });\r\n  }, [groupMembers]);\r\n\r\n  const addMember = () => {\r\n    setAddDisplay(true);\r\n  };\r\n  const delMember = () => {\r\n    setDeleteDisplay(true);\r\n  };\r\n\r\n  // 去重朋友名單與群組成員\r\n\r\n  return (\r\n    <div\r\n      className={\r\n        display ? \"create_group_container addGroup\" : \"create_group_container\"\r\n      }\r\n    >\r\n      <Header\r\n        title={`${title}(${groupMembers?.length})`}\r\n        goback={() => {\r\n          setDisplay(false);\r\n        }}\r\n      />\r\n      <div className=\"groupMoreContainer\">\r\n        {groupMembers.map((item: any) => {\r\n          let url = userState.user.imgUrl + item.user.avatar;\r\n\r\n          return (\r\n            <div className=\"group_member\" key={item.user.uid}>\r\n              <img\r\n                src={url}\r\n                alt=\"\"\r\n                onError={(e: any) => {\r\n                  e.target.onerror = null;\r\n                  e.target.src = defaultAvatar;\r\n                }}\r\n              />\r\n              <p>{item.user.account || item.user.name}</p>\r\n            </div>\r\n          );\r\n        })}\r\n\r\n        {isAuth && (\r\n          <>\r\n            {/* 加人 */}\r\n            <div\r\n              className=\"group_member\"\r\n              onClick={() => {\r\n                addMember();\r\n                setAddDelTitle(\"添加成員\");\r\n              }}\r\n            >\r\n              <img src={add_member} alt=\"N/A\" />\r\n            </div>\r\n            {/* 刪人 */}\r\n            <div\r\n              className=\"group_member\"\r\n              onClick={() => {\r\n                delMember();\r\n                setAddDelTitle(\"刪除成員\");\r\n              }}\r\n            >\r\n              <img src={delete_member} alt=\"N/A\" />\r\n            </div>\r\n          </>\r\n        )}\r\n        <DeleteMember\r\n          title={addDeltitle}\r\n          display={deleteDisplay}\r\n          setDisplay={setDeleteDisplay}\r\n          datas={groupMembers}\r\n        />\r\n        <AddMember\r\n          title={addDeltitle}\r\n          display={addDisplay}\r\n          setDisplay={setAddDisplay}\r\n          datas={friendsData}\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default inject(\r\n  \"groupsState\",\r\n  \"userState\",\r\n  \"friendsState\"\r\n)(observer(GroupMore));\r\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAYAAADimHc4AAAEY0lEQVR4Xu2dz2sTaRjHnyfRDtVVQWEbf2SmjQcVFpY9FRS9CB4ET4rH3f/Ayy54WLwJCt7Fk3i1outfsOKyevAkCFKtxnmnQ5nuoVctcfLK6Faaok3ed56Z6bz55pQmz/N9k89nZtr0ySRMRJQkyc5er/d7mqZnmfmH7La1CzP/5fv+lfW3Zde11tujKHpIRMHG+zb7GXmDdHh+fn7X5OTkYyL65Tvg/g6C4PTG+xYWFnZPTEwsEtFuEwFENPZ5YRjuZ+YLnufd5jAMrzLzn1rrV41G45LWOl4Dqr9c3s3MzHz4FuTFxcW9/X6/NaoA5H0hpZS6TkSXiegaK6VeENFPRHQyCIJ/R4WJOnsCURSd0lpnR52X2R6QMPNUmqatTqezbB+LzlEJdLvdqWazmRDRcrYHZFemPM+barVa/40agjp7AkmS/Li6uppt7MvZHvCImY80Go3D7Xb7vX0sOkclMCBAa70tjuPtgD8qvvx1AwLyxyHBlAAEmBITrocAYaCmcRBgSky4HgKEgZrGbfwz9CYRHQ2C4AwzfzQNQ705gXUCkq+vhPFCzBykbcfc3Fxzdnb2LhG9wSthW4pCfRAgBNI2BgJsyQn1QYAQSNsYCLAlJ9QHAUIgTWOyaeLKysoqBJiSE6hfWlra0ev1Yq31awgQAGoaMfBKGBMxU3z56yEgP8NcCc4ICMPwSUZienr6RC4iJTc7MxNWSumMXRAEXDLDXMs5MxN2QkAulRU3QwAEWBFwZiKGPcDKv1wTBMixtEpyQkAYhrWdCTsgoN4z4boKcGYmXFcB64+3tf5vKARY/eqUa4IAOZZWSRBghU2uCQLkWFol1VmAEzPhugpwZiZcVwHOTMQgwOrILdcEAXIsrZKcEFDn84SdEFDGecLZuxeY+bjVZl5Rk9b6aVHvtih9IqaUyt4+AgH/b0ylCyhqI3biEFQUnDJyIaAMypusAQEQYEXAmfOEHdgDMBO22oRzNmEmnBOgZDtmwpI0LbIgwAKaZAsESNK0yIIAC2iSLRAgSdMgCzNhA1jSpZgJSxM1zMNM2BCYdDkESBM1zIMAQ2DS5ThPWJqoYR7OEzYEJl2OkaQ0UcM8CDAEJl3ukoAnWut6f1iHtF3kDSfgzB4w/KluzQpnZsJbE+/wR4XPjh7OqNAKZ2bChVIqKbzW84CSGBW6DAQUind4OAQMZ1RoBQQUind4OAQMZ1RIhRMz4ULIlBDqzEy4BFaFLOHMRKwQOiWEQkAJkDdbAgK2koA6nydcMUfr5Z2ZCVsTqLgR8wAIqJhAxctjD4CAiglUvPzAHhDH8b5+v/8bM99pt9srFT+2sVi+2+3+3Gw2nxPR2+zrbP9g5htE9E+apr92Oh01FhQqfJJKqQtEdI+IbnEURQe01s+I6OCIj+l+EARZwMBFaz0RRVFm9diIOWtlY5fn+/7FKIpOe5739POX38RxfChN02tEdI6I9mwGkJkf+L5//lsClFLPmdlIwLjnfQI42R80TyQuDAAAAABJRU5ErkJggg==\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAYAAADimHc4AAAD/UlEQVR4Xu2dTWsTURSGz0lsh/pRQcHEj8y0caGCIK4Kim4KLgRXFpf6D9wouBB3QgX34krcWvHjFyiK7cJVQZBqNc5MhjJ1ka2GOLky1EhT2jJ37nVOJG9WaXLveybP0ymdvqRhIqI4jnd1Op0bSZJcZObd6WO9GzO/cF33zvrH0vtKqZEwDF8Skbfxue2+Rl4/HV5aWtozNjb2hohObwHuled50xufW15eHh8dHW0S0biOACIa+jzf9w8y84zjOI/Y9/27zHxbKfWpVCpdV0pFPaBq7fZtcnLy52aQm83mvm63W80qAHlrpIIguEdEt4holoMg+EBEJ4nonOd577LCxLr8BMIwPK+USn/qfEzPgJiZK0mSVOv1+mr+WOzMSqDRaFTK5XJMRKvpGZDeqTiOU6lWq9+zhmBdfgJxHB9ot9vpN/tqega8ZuZjpVLpaK1W+5E/FjuzEugToJTaEUXRCOBnxWe+rk+AeRwSdAlAgC4xy+shwDJQ3TgI0CVmeT0EWAaqG7fx19AHRHTc87wLzPxLNwzr9QmsExD/vRLGhZg+yLw75ubmylNTU0+I6AuuhPNStLQPAiyBzBsDAXnJWdoHAZZA5o2BgLzkLO2DAEsgdWPSNrHVarUhQJechfUrKys7O51OpJT6DAEWgOpG9F0JoxHTxWe+HgLMGRolQIARPvPN6ITNGRoloBM2wme+GX2AOUOjBAgwwme+GQLMGRolQIARPvPNEGDO0CgBnbARPvPN6ITNGRoloBM2wmd3M/4aapendhoEaCOzuwEC7PLUToMAbWR2N0CAXZ6Z09AJZ0ZlfyE6YftMtRLRiGnhsr8YAuwz1UqEAC1c9hejE7bPVCux8E7Y9/15Zj6jdZTCi5VSCxMTE2f/xWEU3gcEQTBPRBDwx2bhAv7Fd9H/nAkBwvYgAAKECQiPRyc8OALwPmEJF+iEJahvMRN9gLAMCIAAYQLC43EGQIAwAaHx6ISFwKdj0QkLwk9HoxGDAGECwuNxBgySAPzv6OJtFN4JF/8SB3siChlhPxAAAcIEhMfjDIAAYQLC49EJD44AdMISLtAJS1BHJzxA1NcdChoxYS8QAAHCBITH4wwQEoBOWAg8OmFB8L3RaMSEJUAABAgTEB6P9wkPkgB8nnDxNlDIFM+8byIEQIAwAeHxOAMGSUAURfu73e41Zn5cq9Vawsc2FOMbjcapcrm8SERf04+zvcnM94nobZIkV+v1ejAUFARfZBAEM0T0lIgechiGh5RS74nocMZjeuZ5XhrQd1NKjYZhmFo9kTGnt2zo8lzXvRKG4bTjOAucUoii6EiSJLNEdImI9m4HkJmfu657eTMBQRAsMrOWgGHP+w1mdWwlq4XbbQAAAABJRU5ErkJggg==\"","import React, { useState, useEffect } from \"react\";\r\nimport Header from \"@components/header\";\r\nimport ChatContent from \"./component/content\";\r\nimport Inputer from \"./component/inputer\";\r\nimport \"./styles.scss\";\r\nimport GroupMore from \"@pages/groups/components/GroupMore\";\r\nimport { observer, inject } from \"mobx-react\";\r\ntype ChatProps = {\r\n  display: boolean;\r\n  setDisplay: Function;\r\n  title: string;\r\n  sendMsg: Function;\r\n  datas: any[];\r\n  friendUid?: any;\r\n  getHistory: any;\r\n  id: number;\r\n  page: number;\r\n  setPage: Function;\r\n  clearHisotry: Function;\r\n  isLastPage: boolean;\r\n  type?: any;\r\n  groupsState?: any;\r\n  userState?: any;\r\n  friendsState?: any;\r\n};\r\nconst Chat = (props: ChatProps) => {\r\n  const {\r\n    display,\r\n    setDisplay,\r\n    title,\r\n    sendMsg,\r\n    datas,\r\n    friendUid,\r\n    type,\r\n    groupsState,\r\n    getHistory,\r\n    clearHisotry,\r\n    id,\r\n    page,\r\n    setPage,\r\n    isLastPage,\r\n    friendsState,\r\n  } = props;\r\n\r\n  const [groupMoreDisplay, setGroupMoreDisplay] = useState(false);\r\n  const { getGroupMembers } = groupsState;\r\n  const { setCurrentChat } = friendsState;\r\n  useEffect(() => {\r\n    if (display) {\r\n      getHistory(id, page);\r\n    }\r\n  }, [display]);\r\n\r\n  useEffect(() => {\r\n    if (display && page >= 1) {\r\n      getHistory(id, page);\r\n    }\r\n  }, [page]);\r\n\r\n  // type===2 群聊天 type===5群消息\r\n  const groupExpand = () => {\r\n    return (\r\n      <li\r\n        className=\"more-icon\"\r\n        onClick={() => {\r\n          setGroupMoreDisplay(true);\r\n          // 取群組人員\r\n          getGroupMembers(groupsState.currentChat.groupId);\r\n        }}\r\n      ></li>\r\n    );\r\n  };\r\n  return (\r\n    <div className={display ? \"chat display\" : \"chat\"}>\r\n      <Header\r\n        goback={() => {\r\n          setPage(1);\r\n          clearHisotry();\r\n          setDisplay(false);\r\n          setCurrentChat({ id: 0 });\r\n        }}\r\n        title={title}\r\n        rightIcon={type === 2 || type === 5 ? groupExpand : null}\r\n      />\r\n      <GroupMore\r\n        display={groupMoreDisplay}\r\n        setDisplay={setGroupMoreDisplay}\r\n        title={title}\r\n      />\r\n      {!groupMoreDisplay && (\r\n        <>\r\n          <ChatContent\r\n            datas={datas}\r\n            friendUid={friendUid}\r\n            getHistory={getHistory}\r\n            page={page}\r\n            setPage={setPage}\r\n            isLastPage={isLastPage}\r\n          />\r\n          <Inputer sendMsg={sendMsg} friendUid={friendUid} />\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default inject(\r\n  \"groupsState\",\r\n  \"userState\",\r\n  \"friendsState\"\r\n)(observer(Chat));\r\n","import axios from 'axios'\r\nimport { Toast } from 'antd-mobile';\r\nimport { Response } from './entity.d';\r\nconst baseURL: string = process.env.NODE_ENV === 'production' ? 'api/' : '';\r\nconst timeout: number = 12000;\r\nconst reqeust = axios.create({\r\n timeout,\r\n transformRequest: [(data) => {\r\n  data = JSON.stringify(data)\r\n  return data\r\n }],\r\n transformResponse: [(data) => {\r\n  if (typeof data === 'string' && data.startsWith('{')) {\r\n   data = JSON.parse(data)\r\n  }\r\n  return data\r\n }]\r\n});\r\n// 请求拦截器\r\nreqeust.interceptors.request.use((config) => {\r\n const { sid, uid } = JSON.parse(sessionStorage.getItem(\"user\") || \"{}\");\r\n config.headers = {\r\n  ...config.headers,\r\n  SID: sid,\r\n  UID: uid\r\n }\r\n config.url = `${baseURL}${config.url}`\r\n return config\r\n}, (error) => {\r\n error.msg = '服务器异常，请联系管理员！'\r\n return Promise.resolve(error)\r\n})\r\n\r\n/**\r\n *响应拦截器\r\n* 自定义状态处理\r\n*/\r\nreqeust.interceptors.response.use((response: Response) => {\r\n const { data } = response\r\n if (data.code !== 0) {\r\n  const hasError = errorHandle(data)\r\n  if (hasError) return Promise.reject(data)\r\n }\r\n return data;\r\n}, (error) => {\r\n error = { response: {} }\r\n error.response.data = {}\r\n error.response.message = \"请求超时或服务器异常，请检查网络或联系管理员！\"\r\n return Promise.reject(error.response)\r\n})\r\n\r\nconst errorHandle = (data: any) => {\r\n if (data.code === 201) {\r\n  sessionStorage.clear()\r\n  window.location.replace(\"/login\");\r\n  Toast.fail(data.message)\r\n  return true;\r\n }\r\n Toast.fail(data.message)\r\n return true;\r\n}\r\nexport default reqeust","import Ws from \"reconnecting-websocket\";\r\nimport ReconnectingWebSocket from \"reconnecting-websocket\";\r\nimport protoRoot from \"../proto/proto\";\r\nconst WSBaseReqProto: any = protoRoot.lookup(\"protocol.WSBaseReqProto\");\r\nconst WSBaseResProto: any = protoRoot.lookup(\"protocol.WSBaseResProto\");\r\n\r\nlet webSocketPingTimer: any;\r\nexport default class MyWs {\r\n  //@ts-ignore\r\n  private ws: ReconnectingWebSocket = null;\r\n  constructor(url: string) {\r\n    if (this.ws == null) {\r\n      this.connect(url);\r\n    }\r\n  }\r\n  // 定时心跳\r\n  webSocketPing() {\r\n    webSocketPingTimer = setTimeout(() => {\r\n      console.log(\"心跳\");\r\n      const userStr = sessionStorage.getItem(\"user\");\r\n      const user = JSON.parse(userStr || \"\");\r\n      const payload = {\r\n        sid: user.sid,\r\n        uid: user.uid,\r\n        type: 0,\r\n      };\r\n      this.send(payload);\r\n      clearTimeout(webSocketPingTimer);\r\n      // 重新执行\r\n\r\n      this.webSocketPing();\r\n    }, 2000);\r\n  }\r\n\r\n  connect = (url: string) => {\r\n    this.ws = new Ws(url, \"\", { debug: false });\r\n  };\r\n\r\n  open = () => {\r\n    this.ws.onopen = (event) => {\r\n      this.loginWs();\r\n      this.webSocketPing();\r\n    };\r\n  };\r\n\r\n  close = () => {\r\n    this.ws.addEventListener(\"close\", () => {\r\n      console.log(\"关闭连接\");\r\n      this.ws.reconnect();\r\n    });\r\n  };\r\n\r\n  errorHandle = () => {\r\n    this.ws.onerror = () => {\r\n      console.log(\"连接发送错误\");\r\n      this.ws.reconnect();\r\n    };\r\n  };\r\n  loginWs = () => {\r\n    const userStr = sessionStorage.getItem(\"user\");\r\n    console.log(\"登录ws\", userStr);\r\n    if (!userStr) return;\r\n    const user = JSON.parse(userStr || \"\");\r\n    const payload = {\r\n      sid: user.sid,\r\n      uid: user.uid,\r\n      type: 1,\r\n    };\r\n    this.send(payload);\r\n  };\r\n  send = (data: any) => {\r\n    const wsData = WSBaseReqProto.create(data);\r\n    let buffer = WSBaseReqProto.encode(wsData).finish();\r\n    this.ws.send(buffer);\r\n  };\r\n  htmlSpecialChars(str: string) {\r\n    str = str.replace(/&/g, \"&amp;\");\r\n    str = str.replace(/</g, \"&lt;\");\r\n    str = str.replace(/>/g, \"&gt;\");\r\n    str = str.replace(/\"/g, \"&quot;\");\r\n    str = str.replace(/'/g, \"&#039;\");\r\n    return str;\r\n  }\r\n  message = (obj: any) => {\r\n    this.ws.onmessage = (event) => {\r\n      const data = event.data;\r\n      let reader = new FileReader();\r\n      reader.readAsArrayBuffer(data);\r\n      reader.onload = () => {\r\n        const buf = new Uint8Array(reader.result as any);\r\n        const response = WSBaseResProto.decode(buf);\r\n        console.log(response);\r\n        obj.dispatchEvent(response.type, response);\r\n      };\r\n    };\r\n  };\r\n}\r\n","import axios from \"axios\"\r\nimport api from \"./request\"\r\n\r\nimport { Params, Data } from \"./entity\"\r\nexport const get = (url: string, params: Params) => {\r\n return api({\r\n  url,\r\n  method: 'get',\r\n  params,\r\n  headers: { 'Content-Type': 'application/x-www-form-urlencoded;charset=utf-8' }\r\n })\r\n}\r\n\r\nexport const post = (url: string, data: Data) => {\r\n return api({\r\n  url,\r\n  method: 'post',\r\n  data,\r\n  headers: { 'Content-Type': 'application/json;charset=utf-8' }\r\n })\r\n}\r\n\r\nexport const upload = (url: string, data: Data) => {\r\n const baseURL: string = process.env.NODE_ENV === 'production' ? 'api/' : '';\r\n return axios.post(baseURL + url, data, {\r\n  headers: { 'Content-Type': 'multipart/form-data' },\r\n })\r\n}","import { Data, Params } from 'src/request/entity.d';\r\nimport { get, post } from \"src/request/api\"\r\n\r\nexport const login = (data: Data) => {\r\n return post('/api/user/login/byPwd', data)\r\n}","import MyWs from \"./websocket\";\r\nexport class ObserverListen {\r\n  constructor() {}\r\n  handlers: any = {};\r\n\r\n  addEventListener(type: number, handler: Function) {\r\n    if (!(type in this.handlers)) {\r\n      this.handlers[type] = [];\r\n    }\r\n    this.handlers[type].push(handler);\r\n  }\r\n\r\n  dispatchEvent(type: number, parasm: any) {\r\n    if (!(type in this.handlers)) {\r\n      return new Error(\"未注册该事件\");\r\n    }\r\n    this.handlers[type].forEach((handler: Function) => {\r\n      handler(parasm);\r\n    });\r\n  }\r\n\r\n  removeEventListener(type: number, handler: Function) {\r\n    if (!(type in this.handlers)) {\r\n      return new Error(\"无效事件\");\r\n    }\r\n    if (!handler) {\r\n      delete this.handlers[type];\r\n    } else {\r\n      const idx = this.handlers[type].findIndex((ele: any) => ele === handler);\r\n      if (idx === -1) {\r\n        return new Error(\"无该绑定事件\");\r\n      }\r\n      this.handlers[type].splice(idx, 1);\r\n      if (this.handlers[type].length === 0) {\r\n        delete this.handlers[type];\r\n      }\r\n    }\r\n  }\r\n}\r\nexport let listen: ObserverListen = null as any;\r\nexport let ws: any = null as any;\r\nexport const addListenr = () => {\r\n  const userStr = sessionStorage.getItem(\"user\");\r\n  if (!listen) {\r\n    listen = new ObserverListen();\r\n  }\r\n  if (ws) {\r\n    ws.loginWs();\r\n    ws.webSocketPing();\r\n    return;\r\n  }\r\n\r\n  if (userStr) {\r\n    let user = JSON.parse(userStr);\r\n    ws = new MyWs(`wss://${user.ws}/ws`);\r\n    // ws = new MyWs(`wss://172.21.174.75:9001/ws`);\r\n    ws.message(listen);\r\n    ws.onopen = () => {\r\n      \"open ws\";\r\n    };\r\n    ws.loginWs();\r\n    ws.webSocketPing();\r\n  }\r\n};\r\nexport default addListenr();\r\n","export default __webpack_public_path__ + \"static/media/logo.066b667d.png\";","import React, { useEffect } from \"react\";\r\nimport { observer, inject } from \"mobx-react\";\r\nimport downlogo from \"../../assets/img/logo.png\";\r\nimport { Link } from \"react-router-dom\";\r\nimport cancel from \"../../assets/img/cancel.png\";\r\nimport \"./style.scss\";\r\nfunction DownLoad(props: any) {\r\n  const { userState } = props;\r\n  let {\r\n    showDownLoadLink,\r\n    setShowDownLoadLink,\r\n    isIosLink,\r\n    setIsIosLink,\r\n  } = userState;\r\n  function isWebview() {\r\n    var useragent = navigator.userAgent;\r\n    var rules = [\"wv\", \"WebView\", \"webview\"];\r\n    var regex = new RegExp(`(${rules.join(\"|\")})`, \"ig\");\r\n    return Boolean(useragent.match(regex));\r\n  }\r\n  function isIos() {\r\n    var useragent = navigator.userAgent;\r\n    var rules = [\"Mac\", \"(iPhone|iPod|iPad)(?!.*Safari/)\"];\r\n    var regex = new RegExp(`(${rules.join(\"|\")})`, \"ig\");\r\n    return Boolean(useragent.match(regex));\r\n  }\r\n  useEffect(() => {\r\n    if (isWebview()) {\r\n      setShowDownLoadLink(false);\r\n    }\r\n    if (isIos()) setIsIosLink(true);\r\n    if (!isIos()) setIsIosLink(false);\r\n  }, []);\r\n  console.log(navigator.userAgent);\r\n  console.log(navigator.userAgent);\r\n  return (\r\n    <>\r\n      {showDownLoadLink && (\r\n        <div\r\n          className=\"download_link\"\r\n          style={{ bottom: `${props.loginPage ? 0 : \"8%\"}` }}\r\n        >\r\n          <div className=\"content\">\r\n            <img src={downlogo} alt=\"logo\" />\r\n            <h4>\r\n              聊天就来乐聊\r\n              <p>随时随地,想聊就聊!</p>\r\n            </h4>\r\n          </div>\r\n\r\n          {isIosLink ? (\r\n            <Link\r\n              to=\"/iosdownload\"\r\n              onClick={() => setShowDownLoadLink(false)}\r\n            ></Link>\r\n          ) : (\r\n            <a\r\n              href=\"/leliao.apk\"\r\n              download\r\n              onClick={() => setShowDownLoadLink(false)}\r\n            ></a>\r\n          )}\r\n\r\n          <img\r\n            src={cancel}\r\n            alt=\"cancel\"\r\n            onClick={() => setShowDownLoadLink(false)}\r\n          />\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n\r\nexport default inject(\"userState\")(observer(DownLoad));\r\n","export default \"data:image/png;base64,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\"","import React, { useState, useEffect, useRef } from \"react\";\r\nimport { Toast } from \"antd-mobile\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { login } from \"./request\";\r\nimport { observer, inject } from \"mobx-react\";\r\nimport { addListenr } from \"@utils/observerListen\";\r\nimport DownLoad from \"@components/download\";\r\nimport \"./style.scss\";\r\n// @ts-ignore\r\n// const isWebview = require(\"js-is-webview\");\r\n// const is_webview = new isWebview();\r\nconst Login = (props: any) => {\r\n  const inputRef: React.MutableRefObject<any> = useRef(null);\r\n\r\n  const { push } = useHistory();\r\n  const history = useHistory();\r\n  const { userState } = props;\r\n  const [nickname, setNickname] = useState<string>();\r\n  const [password, setPassword] = useState<string>();\r\n  let { updateUser, setShowDownLoadLink } = userState as UserState;\r\n  const toLogin = () => {\r\n    if (!nickname || !password) {\r\n      Toast.fail(\"请输入账号或密码\");\r\n      return;\r\n    }\r\n    Toast.loading(\"Loading...\", 0);\r\n    login({ account: nickname, pwd: password })\r\n      .then((res: any) => {\r\n        if (res.code == 0) {\r\n          updateUser({ ...res.data, isLogin: true });\r\n          Toast.hide();\r\n          Toast.success(\"登录成功!\");\r\n          addListenr();\r\n          history.replace(\"/\");\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        Toast.fail(err.message);\r\n      });\r\n  };\r\n\r\n  return (\r\n    <div className=\"login\">\r\n      <div className=\"main\">\r\n        <p className=\"title\">登陆后发现更精彩</p>\r\n\r\n        <div className=\"username\">\r\n          <input\r\n            ref={inputRef}\r\n            autoFocus\r\n            type=\"text\"\r\n            placeholder=\"请输入账号或手机号\"\r\n            onChange={(e) => setNickname(e.target.value)}\r\n          />\r\n        </div>\r\n        <div className=\"pwd\">\r\n          <input\r\n            type=\"password\"\r\n            placeholder=\"请输入密码\"\r\n            onChange={(e) => setPassword(e.target.value)}\r\n          />\r\n        </div>\r\n        <div className=\"login-btn\" onClick={toLogin}>\r\n          登录\r\n        </div>\r\n        <div\r\n          className=\"reg-btn\"\r\n          onClick={() => {\r\n            push(\"/r\");\r\n          }}\r\n        >\r\n          <span className=\"icon\"></span>\r\n          <span className=\"text\">切换到快速注册</span>\r\n        </div>\r\n      </div>\r\n      <DownLoad loginPage />\r\n    </div>\r\n  );\r\n};\r\nexport default inject(\"userState\")(observer(Login));\r\n","import React from \"react\";\r\nimport { observer, inject } from \"mobx-react\";\r\nimport { Modal, Toast } from \"antd-mobile\";\r\n\r\nimport \"../style.scss\";\r\nimport { title } from \"process\";\r\nconst RegOne = (props: any) => {\r\n  let { registerState } = props;\r\n  let {\r\n    phoneNumber,\r\n    register,\r\n    changePhoneNum,\r\n    changeStep,\r\n  } = registerState as RegisterStore;\r\n  const sendMsg = () => {\r\n    register().then((res) => {\r\n      if (res.code === 0) {\r\n        Toast.success(\"发送成功\", 1.5);\r\n        changeStep(2);\r\n      }\r\n    });\r\n  };\r\n  const click = () => {\r\n    if (phoneNumber.length !== 11) {\r\n      Toast.fail(\"请输入正确的手机号\");\r\n      return;\r\n    }\r\n    sendMsg();\r\n  };\r\n  return (\r\n    <div className=\"main\">\r\n      <p className=\"reg-title\">注册</p>\r\n      <p className=\"reg-remark\">未注册手机验证后完成注册</p>\r\n      <p className=\"reg-mobile\">\r\n        <span className=\"area\">+86</span>\r\n        <input\r\n          type=\"tel\"\r\n          pattern=\"\\d*\"\r\n          autoFocus\r\n          onChange={(e) => {\r\n            changePhoneNum(e.target.value);\r\n          }}\r\n          placeholder=\"1个手机号只能注册1个账号\"\r\n        />\r\n      </p>\r\n      <p\r\n        className={\r\n          phoneNumber.length !== 11 ? \"reg-btn no-activity\" : \"reg-btn\"\r\n        }\r\n        onClick={click}\r\n      >\r\n        获取验证码\r\n      </p>\r\n    </div>\r\n  );\r\n};\r\nexport default inject(\"registerState\")(observer(RegOne));\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { Toast } from \"antd-mobile\";\r\nimport { checkcode } from \"../request\";\r\nimport { observer, inject } from \"mobx-react\";\r\nimport \"../style.scss\";\r\nconst RegTwo = (props: any) => {\r\n  let { registerState } = props;\r\n  let { phoneNumber, register, changeStep } = registerState as RegisterStore;\r\n  const [timing, setTiming] = useState(true);\r\n  const [second, setSecond] = useState(60);\r\n  const [code, setCode] = useState(\"\");\r\n  useEffect(() => {\r\n    let interval: any;\r\n    if (timing) {\r\n      interval = setInterval(() => {\r\n        setSecond((preSecond) => {\r\n          if (preSecond <= 1) {\r\n            setTiming(false);\r\n            clearInterval(interval);\r\n            return 60;\r\n          } else {\r\n            return preSecond - 1;\r\n          }\r\n        });\r\n      }, 1000);\r\n    }\r\n    return () => clearInterval(interval);\r\n  }, [timing]);\r\n  useEffect(() => {\r\n    if (code.length === 4) {\r\n      viliCode();\r\n    }\r\n  }, [code]);\r\n  const viliCode = () => {\r\n    Toast.loading(\"Loading...\");\r\n    checkcode({ code })\r\n      .then((res: any) => {\r\n        changeStep(3);\r\n        Toast.success(\"验证通过\");\r\n      })\r\n      .catch((e) => {\r\n        Toast.fail(e.message || \"验证码错误\");\r\n        setCode(\"\");\r\n      });\r\n  };\r\n\r\n  const reSentViliCode = () => {\r\n    register().then((res) => {\r\n      Toast.success(\"成功发送\");\r\n    });\r\n    setTiming(true);\r\n  };\r\n\r\n  return (\r\n    <div className=\"main reg-two\">\r\n      <p className=\"reg-title\">验证码</p>\r\n      <p className=\"reg-remark\">已发送验证码至：{phoneNumber}</p>\r\n      {/* <p className=\"reg-remark\">\r\n    <span>验证码已通过短信发送至 +86{phoneNumber}</span>\r\n   </p> */}\r\n      <p className=\"reg-mobile\">\r\n        <span className={`in-num ${code[0] ? \"check\" : \"\"}`}>{code[0]}</span>\r\n        <span className={`in-num ${code[1] ? \"check\" : \"\"}`}>{code[1]}</span>\r\n        <span className={`in-num ${code[2] ? \"check\" : \"\"}`}>{code[2]}</span>\r\n        <span className={`in-num ${code[3] ? \"check\" : \"\"}`}>{code[3]}</span>\r\n        <input\r\n          type=\"number\"\r\n          pattern=\"\\d*\"\r\n          autoFocus\r\n          value={code}\r\n          onChange={(e) => setCode(e.target.value)}\r\n        />\r\n      </p>\r\n\r\n      <span className=\"reset\" onClick={() => reSentViliCode()}>{`重新发送${\r\n        timing ? second : \"\"\r\n      }`}</span>\r\n    </div>\r\n  );\r\n};\r\nexport default inject(\"registerState\")(observer(RegTwo));\r\n","import { Data, Params } from 'src/request/entity.d';\r\nimport { get, post } from \"src/request/api\"\r\n\r\nexport const query = (params: Params) => {\r\n return get('/api/data/menu-list', params)\r\n}\r\nexport const sendSms = (data: Data) => {\r\n return post('/api/user/login/sendSms', data)\r\n}\r\nexport const checkcode = (data: Data) => {\r\n return post('/api/user/login/checkCode', data)\r\n}\r\nexport const save = (data: Data) => {\r\n return post('/api/user/login/register', data)\r\n}","export default \"data:image/png;base64,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\"","export default \"data:image/png;base64,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\"","import React, { useState, useEffect } from \"react\";\r\nimport { save } from \"../request\";\r\nimport { Toast } from \"antd-mobile\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { observer, inject } from \"mobx-react\";\r\nimport { login } from \"@pages/login/request\";\r\nimport { addListenr } from \"@utils/observerListen\";\r\nimport visibleImg from \"../../../assets/img/visible.png\";\r\nimport invisibleImg from \"../../../assets/img/invisible.png\";\r\nimport \"../style.scss\";\r\nconst RegThree = (props: any) => {\r\n  const { registerState, userState }: any = props;\r\n  const [pwd, setPwd] = useState<any>(\"\");\r\n  const [verifyPwd, setVerifyPwd] = useState<any>(\"\");\r\n  const history = useHistory();\r\n  const [recommend, setRecommend] = useState<string>(\"\");\r\n  const [isPasswordVisible, setIsPasswordVisible] = useState<boolean>(false);\r\n  const [\r\n    isConfirmPasswordVisible,\r\n    setIsConfirmPasswordVisible,\r\n  ] = useState<boolean>(false);\r\n  let { updateUser } = userState as UserState;\r\n  // 拿主播推荐注册码\r\n  useEffect(() => {\r\n    let str = window.location.href;\r\n    let index = str.lastIndexOf(\"?\");\r\n    let recommend = str.substring(index + 1, str.length);\r\n    // 如果没有推荐码则不存\r\n    if (recommend !== str) {\r\n      setRecommend(recommend);\r\n    }\r\n  }, []);\r\n  let {\r\n    phoneNumber,\r\n    changeStep,\r\n    changePhoneNum,\r\n  } = registerState as RegisterStore;\r\n  const saveUser = () => {\r\n    if (pwd !== verifyPwd) {\r\n      Toast.fail(\"密码不一致,请重新输入\", 1.5);\r\n      return;\r\n    }\r\n\r\n    Toast.loading(\"Loading...\");\r\n    save({ name: phoneNumber, pwd: pwd, phone: phoneNumber, recommend })\r\n      .then((res: any) => {\r\n        if (res.code === 0) {\r\n          changePhoneNum(\"\");\r\n          login({ account: phoneNumber, pwd: pwd })\r\n            .then((res) => {\r\n              changeStep(1);\r\n              updateUser({ ...res.data, isLogin: true });\r\n              // 注册socket\r\n              addListenr();\r\n              history.replace(\"/\");\r\n              Toast.success(\"恭喜您,注册成功!\");\r\n            })\r\n            .catch((err) => {\r\n              Toast.fail(err.message);\r\n            });\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        Toast.fail(err.message);\r\n      });\r\n  };\r\n\r\n  return (\r\n    <div className=\"main reg-three\">\r\n      <p className=\"reg-title\">设置密码</p>\r\n      <p className=\"reg-mobile\">\r\n        <input\r\n          type={isPasswordVisible ? \"text\" : \"password\"}\r\n          autoFocus\r\n          placeholder=\"6-12位数字+字母的组合\"\r\n          onChange={(e) => setPwd(e.target.value)}\r\n        />\r\n        {isPasswordVisible ? (\r\n          <img\r\n            className=\"passwordImg\"\r\n            src={visibleImg}\r\n            onClick={() => setIsPasswordVisible(!isPasswordVisible)}\r\n          />\r\n        ) : (\r\n          <img\r\n            className=\"checkpasswordImg\"\r\n            src={invisibleImg}\r\n            onClick={() => setIsPasswordVisible(!isPasswordVisible)}\r\n          />\r\n        )}\r\n      </p>\r\n      <p className=\"reg-mobile\">\r\n        <input\r\n          type={isConfirmPasswordVisible ? \"text\" : \"password\"}\r\n          placeholder=\"确认密码\"\r\n          onChange={(e) => setVerifyPwd(e.target.value)}\r\n        />\r\n        {isConfirmPasswordVisible ? (\r\n          <img\r\n            className=\"passwordImg\"\r\n            src={visibleImg}\r\n            onClick={() =>\r\n              setIsConfirmPasswordVisible(!isConfirmPasswordVisible)\r\n            }\r\n          />\r\n        ) : (\r\n          <img\r\n            className=\"checkpasswordImg\"\r\n            src={invisibleImg}\r\n            onClick={() =>\r\n              setIsConfirmPasswordVisible(!isConfirmPasswordVisible)\r\n            }\r\n          />\r\n        )}\r\n      </p>\r\n      <p\r\n        className={\r\n          pwd === \"\" || verifyPwd === \"\" ? \"reg-btn no-activity\" : \"reg-btn\"\r\n        }\r\n        onClick={() => saveUser()}\r\n      >\r\n        确认\r\n      </p>\r\n    </div>\r\n  );\r\n};\r\nexport default inject(\"registerState\", \"userState\")(observer(RegThree));\r\n","import React from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport HeaderBar from \"@components/header\";\r\nimport RegOne from \"./component/regOne\";\r\nimport RegTwo from \"./component/regTwo\";\r\nimport RegThree from \"./component/regThree\";\r\nimport { observer, inject } from \"mobx-react\";\r\nimport \"./style.scss\";\r\nconst Register = (props: any) => {\r\n  let { registerState } = props;\r\n  let { step, changePhoneNum, changeStep } = registerState as RegisterStore;\r\n  const { replace } = useHistory();\r\n\r\n  // 注册跳转\r\n  const back = () => {\r\n    if (step === 1) {\r\n      changePhoneNum(\"\");\r\n      replace(\"/login\");\r\n      return;\r\n    }\r\n    if (step === 2) {\r\n      changePhoneNum(\"\");\r\n      changeStep(1);\r\n      return;\r\n    }\r\n    if (step === 3) {\r\n      changePhoneNum(\"\");\r\n      changeStep(2);\r\n      return;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"register\">\r\n      <HeaderBar goback={back} title={\"注册\"} service={\"\"} />\r\n      {step === 1 && <RegOne />}\r\n      {step === 2 && <RegTwo />}\r\n      {step === 3 && <RegThree />}\r\n    </div>\r\n  );\r\n};\r\nexport default inject(\"registerState\")(observer(Register));\r\n","export const config = [\r\n  {\r\n    name: \"消息\",\r\n    icon: \"msg-icon\",\r\n    iconCheck: \"msg-live\",\r\n    path: \"/\",\r\n  },\r\n  {\r\n    name: \"朋友\",\r\n    icon: \"friend-icon\",\r\n    iconCheck: \"friend-live\",\r\n    path: \"/friends\",\r\n  },\r\n  // {\r\n  //   name: \"群组\",\r\n  //   icon: \"group-icon\",\r\n  //   iconCheck: \"group-live\",\r\n  //   path: \"/groups\",\r\n  // },\r\n  {\r\n    name: \"我的\",\r\n    icon: \"my-icon\",\r\n    iconCheck: \"my-live\",\r\n    path: \"/my\",\r\n  },\r\n];\r\n","import React, { useEffect, useRef } from \"react\";\r\nimport { observer, inject } from \"mobx-react\"\r\nimport { useHistory, useLocation } from \"react-router-dom\";\r\nimport { config } from \"./config\"\r\nimport \"./style.scss\"\r\nconst NavBar = (props: any) => {\r\n  let history = useHistory();\r\n  let location = useLocation();\r\n  const ref = useRef(null);\r\n  const { commonState, msgState } = props;\r\n  const { total } = msgState;\r\n  const to = (path: string) => {\r\n    history.replace(path)\r\n  }\r\n  useEffect(() => {\r\n    const curretn: any = ref.current;\r\n    if (curretn) {\r\n      commonState.updateFooterHeight(curretn.clientHeight);\r\n    }\r\n  }, [])\r\n  return (\r\n    <ul className=\"navBar\" ref={ref}>\r\n      {\r\n        config.map((item, index) => {\r\n          return <li onClick={() => to(item.path)} key={item.name} className={item.path === location.pathname ? 'activity' : ''}>\r\n            {item.icon === 'msg-icon' && total > 0 && < span className=\"total\">{total}</span>\r\n            }\r\n            <div className=\"icon\">\r\n              <i className={`icons ${item.icon}`} />\r\n              <i className={`icons ${item.iconCheck}`} />\r\n            </div>\r\n            <span className={item.path === location.pathname ? 'activity-font' : ''}>{item.name}</span>\r\n          </li>\r\n        })\r\n      }\r\n    </ul >\r\n  )\r\n}\r\nexport default inject('commonState', 'msgState')((observer(NavBar)));\r\n//","import { post, get, upload } from \"src/request/api\";\r\n\r\n// 创建群组\r\nexport const sendGroupMsg = (data = {}) => {\r\n  return post(\"/api/group/msg/create\", data);\r\n};\r\n// 创建群组\r\nexport const add = (data = {}) => {\r\n  return post(\"/api/group/create\", data);\r\n};\r\n// 群用户列表\r\nexport const lists = (data = {}) => {\r\n  return get(\"/api/group/user/lists\", {});\r\n};\r\n// 群用户列表\r\nexport const usersByGroupd = (data = {}) => {\r\n  return get(\"/api/group/lists\", {});\r\n};\r\n\r\n// 上传图片\r\nexport const uploadImg = (data: any) => {\r\n  return upload(\"/api/file/img/upload\", data);\r\n};\r\n\r\n// 群消息-某群历史消息\r\nexport const getGroupHisotrys = (data: any) => {\r\n  return get(\"/api/group/msg/lists\", data);\r\n};\r\n\r\nexport const getGroupMembersByGroupId = (groupId: number) => {\r\n  return get(\"/api/group/lists\", { groupId });\r\n};\r\n\r\nexport const deleteGroupMembers = (uids: string, groupId: number) => {\r\n  return post(\"/api/group/user/deleteByUid\", { uids, groupId });\r\n};\r\nexport const addGroupMembers = (uids: string, groupId: number) => {\r\n  return post(\"/api/group/user/create\", { uids, groupId });\r\n};\r\n","import { Data, Params, Response } from \"src/request/entity.d\";\r\nimport { get, post } from \"src/request/api\";\r\n\r\nexport const login = (data: Data) => {\r\n  return post(\"/api/user/login/byPwd\", data);\r\n};\r\n\r\nexport const friendsAdded = () => {\r\n  return get(\"/api/user/friendAsk/lists\", {});\r\n};\r\n\r\nexport const getFriends = () => {\r\n  return get(\"/api/user/friend/lists\", {});\r\n};\r\n\r\nexport const searchFriendByAccount = (account: string) => {\r\n  return post(\"/api/user/friend/search\", { account, reqNo: \"\", timeStamp: 0 });\r\n};\r\n\r\nexport const requestAddFriend = (friendUid: string) => {\r\n  return post(\"/api/user/friendAsk/create\", {\r\n    friendUid,\r\n    reqNo: \"\",\r\n    timeStamp: 0,\r\n  });\r\n};\r\n\r\nexport const agreeOrDeclineFriend = (status: number, id: number) => {\r\n  return post(\"/api/user/friendAsk/ack\", {\r\n    status,\r\n    id,\r\n    reqNo: \"\",\r\n    timeStamp: 0,\r\n  });\r\n};\r\nexport const list = () => {\r\n  return get(\"/api/user/friend/lists\", {});\r\n};\r\n\r\nexport const getMessagesHistory = (data: any) => {\r\n  return get(\"/api/user/friendMsg/lists\", data);\r\n};\r\nexport const sendMessage = (data = {}) => {\r\n  return post(\"/api/user/friendMsg/create\", data);\r\n};\r\n","import { Data, Params } from 'src/request/entity.d';\r\nimport { get, post } from \"src/request/api\"\r\n\r\n// 用户最后信息\r\nexport const userList = () => {\r\n return get('/api/user/friend/lists', {})\r\n}\r\n// 群最后信息\r\nexport const groupList = () => {\r\n return get('/api/group/user/lists', {})\r\n}\r\n\r\n// 清空群信息-某个群\r\nexport const clearMsgByGroup = (data: Data) => {\r\n return post(\"/api/group/user/clearUnMsgCount\", data)\r\n}\r\n\r\n// 清空朋友信息-某个人\r\nexport const clearMsgByFriend = (data: Data) => {\r\n return post(\"/api/user/friendMsg/clearUnMsgCount\", data)\r\n}","import React, { useEffect, useState } from \"react\";\r\nimport { observer, inject } from \"mobx-react\";\r\nimport Header from \"@components/header\";\r\nimport NavBar from \"@components/navBar\";\r\nimport { sendGroupMsg } from \"../groups/request\";\r\nimport { sendMessage } from \"../friends/request\";\r\nimport Chat from \"../chat\";\r\nimport defaultAvatar from \"@pages/my/assets/avatar.png\";\r\nimport DownLoad from \"@components/download\";\r\nimport {\r\n  userList,\r\n  groupList,\r\n  clearMsgByFriend,\r\n  clearMsgByGroup,\r\n} from \"./request\";\r\nimport \"./style.scss\";\r\n\r\nfunction Messages(props: any) {\r\n  const { msgState, userState, groupsState, friendsState } = props;\r\n  const {\r\n    isLastPage: groupStateLastPage,\r\n    messagesHistory: groupHisitory,\r\n    setCurrentChat,\r\n    groupHisotrys,\r\n    clearGroupHisotry,\r\n    myselfMsg: groupSelfMsg,\r\n  } = groupsState;\r\n  const [sentUserUid, setSentUserUid] = useState<number>();\r\n  const [page, setPage] = useState(1);\r\n  const {\r\n    setCurrentChat: setFriendsCurrentChat,\r\n    getMessageHistory,\r\n    messagesHistory: friendHisitory,\r\n    clearFriendHisotry,\r\n    myselfMsg: friendSelfMsg,\r\n    isLastPage: friendsStateLastPage,\r\n  } = friendsState;\r\n  const {\r\n    msgHisotry,\r\n    addHistoryItem,\r\n    init,\r\n    initMessags,\r\n    setCurrentChatByMsgStore,\r\n  } = msgState as any;\r\n  const [check, setCheck] = useState<any>({});\r\n  let { user } = userState;\r\n  const [display, setDisplay] = useState(false);\r\n  const toChat = (data: any) => {\r\n    const { type, id } = data;\r\n    setDisplay(true);\r\n    setCheck(data);\r\n\r\n    if (type === 1) {\r\n      //  朋友消息\r\n      setSentUserUid(data.id);\r\n      clearFriend({ receiverUid: id });\r\n      setCurrentChatByMsgStore({ id: id });\r\n      setFriendsCurrentChat(id);\r\n      getMessageHistory(data.id);\r\n    } else {\r\n      clearGroup({ groupId: id });\r\n      groupHisotrys(id);\r\n      setCurrentChat(id);\r\n      setCurrentChatByMsgStore({ groupId: id });\r\n    }\r\n    data.unMsgCount = 0;\r\n  };\r\n  const sendMsg = (msg: string) => {\r\n    //  消息类型（0：普通文字消息，1：图片消息，2：文件消息，3：语音消息，4：视频消息）\r\n    let groupdData = {\r\n      groupId: check.id,\r\n      msgType: 0,\r\n      msgContent: msg,\r\n    };\r\n\r\n    let friendData = {\r\n      receiverUid: sentUserUid,\r\n      msgType: 0,\r\n      msgContent: msg,\r\n    };\r\n    if (check.type === 1) {\r\n      friendSelfMsg({ receiveId: sentUserUid, msgContent: msg, msgType: 0 });\r\n      sendMessage(friendData).then((res) => {});\r\n    } else {\r\n      groupSelfMsg(groupdData);\r\n      sendGroupMsg(groupdData).then((res) => {});\r\n    }\r\n  };\r\n  const initUserList = () => {\r\n    userList().then((res) => {\r\n      const { data } = res;\r\n      data.map((item: any) => {\r\n        if (item.lastMsgContent) {\r\n          const data: MessageStore.MsgHisotry = {\r\n            id: item.user.uid,\r\n            type: 1,\r\n            name: item.remark || item.user.name,\r\n            remark: item.user.remark,\r\n            avatar: item.user.avatar,\r\n            lastMsgContent: item.lastMsgContent,\r\n            unMsgCount: item.unMsgCount,\r\n            modifiedTime: item.modifiedTime,\r\n            dataTime: item.modifiedTime,\r\n          };\r\n          addHistoryItem(data);\r\n        }\r\n      });\r\n    });\r\n  };\r\n  const initGroupList = () => {\r\n    groupList().then((res) => {\r\n      const { data } = res;\r\n      data.map((item: any) => {\r\n        if (item.lastMsgContent) {\r\n          const data: MessageStore.MsgHisotry = {\r\n            id: item.groupId,\r\n            type: 2,\r\n            name: item.remark || item.group.name,\r\n            remark: item.group.remark,\r\n            avatar: item.group.avatar,\r\n            lastMsgContent: item.lastMsgContent,\r\n            unMsgCount: item.unMsgCount,\r\n            modifiedTime: item.lastMsgTime,\r\n            dataTime: item.lastMsgTime,\r\n          };\r\n          addHistoryItem(data);\r\n        }\r\n      });\r\n    });\r\n  };\r\n  const clearFriend = (data: any) => {\r\n    clearMsgByFriend(data).then(() => {});\r\n  };\r\n  const clearGroup = (data: any) => {\r\n    clearMsgByGroup(data).then(() => {});\r\n  };\r\n\r\n  const objToArray = (obj: any) => {\r\n    let array: any[] = [];\r\n    Object.keys(obj).map((key) => {\r\n      array.push(obj[key]);\r\n    });\r\n    array.sort((a: any, b: any) => {\r\n      let t1 = new Date(a.dataTime);\r\n      let t2 = new Date(b.dataTime);\r\n      return t2.getTime() - t1.getTime();\r\n    });\r\n    return array;\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (user.isLogin && init) return;\r\n    initGroupList();\r\n    initUserList();\r\n    initMessags();\r\n  }, []);\r\n  useEffect(() => {\r\n    if (!display && check.type) {\r\n      if (check.type === 2) {\r\n        clearGroup({ groupId: check.id });\r\n      } else {\r\n        clearFriend({ receiverUid: check.id });\r\n      }\r\n      setCurrentChat({ groupId: 0, id: 0 });\r\n      setCurrentChatByMsgStore({ groupId: 0, id: 0 });\r\n    }\r\n  }, [display]);\r\n  const emojiTranslate = (msgContent: string) => {\r\n    let html = msgContent\r\n      .replace(/:emoji\\[([^\\s\\[\\]]+?)\\]/g, function (emoji: any) {\r\n        var emojiId = emoji.replace(/^:emoji/g, \"\");\r\n        emojiId = emojiId.slice(1, emojiId.length - 1);\r\n        return `<i class=\"emoji-icon emoji-${emojiId}\"></i>`;\r\n      })\r\n      .replace(/\\n/g, \"<br>\");\r\n    return html;\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Header title=\"消息\" />\r\n      <div className=\"chat_container\">\r\n        {objToArray(msgHisotry).map((item, index) => {\r\n          let url;\r\n          if (item.groupAvatar) {\r\n            url = userState.user.imgUrl + item.groupAvatar;\r\n          } else {\r\n            url = userState.user.imgUrl + item.avatar;\r\n          }\r\n          return (\r\n            <div\r\n              className=\"single_chat\"\r\n              onClick={() => toChat(item)}\r\n              key={index}\r\n            >\r\n              <div className=\"avatar\">\r\n                {item.unMsgCount > 0 ? (\r\n                  <p className=\"unread\">{item.unMsgCount}</p>\r\n                ) : null}\r\n\r\n                <img\r\n                  src={url}\r\n                  alt=\"\"\r\n                  onError={(e: any) => {\r\n                    e.target.onerror = null;\r\n                    e.target.src = defaultAvatar;\r\n                  }}\r\n                />\r\n              </div>\r\n              <div className=\"content_text\">\r\n                <div className=\"content_title\">\r\n                  <h4 className=\"content_title_name\">{item.name}</h4>\r\n                  <p className=\"content_title_time\">{item.modifiedTime}</p>\r\n                </div>\r\n                <p\r\n                  dangerouslySetInnerHTML={{\r\n                    __html: emojiTranslate(item.lastMsgContent),\r\n                  }}\r\n                ></p>\r\n              </div>\r\n            </div>\r\n          );\r\n        })}\r\n      </div>\r\n      <DownLoad />\r\n      <NavBar />\r\n      <Chat\r\n        id={check ? check.id : 0}\r\n        page={page}\r\n        setPage={setPage}\r\n        isLastPage={\r\n          check.type === 1 ? friendsStateLastPage : groupStateLastPage\r\n        }\r\n        friendUid={sentUserUid}\r\n        clearHisotry={check.type === 1 ? clearFriendHisotry : clearGroupHisotry}\r\n        getHistory={check.type === 1 ? getMessageHistory : groupHisotrys}\r\n        datas={check.type === 1 ? friendHisitory : groupHisitory}\r\n        type={check.type}\r\n        sendMsg={sendMsg}\r\n        display={display}\r\n        setDisplay={setDisplay}\r\n        title={check?.name || \"\"}\r\n      />\r\n    </>\r\n  );\r\n}\r\nexport default inject(\r\n  \"userState\",\r\n  \"msgState\",\r\n  \"groupsState\",\r\n  \"friendsState\"\r\n)(observer(Messages));\r\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAYAAADEtGw7AAACoklEQVRIS62VzU8TURTFz5mZkpC0tV3BwkTCxrQButAIkvixMRr3EHTryoWGhQk7rUsXJkYTd641/ANqZCWJgiEhHcDiQiVRF8QE+0UIaWeOeUMLbZ0igm85c9/v3XfeufcSIWt1dTW2vb2dJnkZwHkAJwEkAHgkf0paAzAr6fXW1lZ+ZGSk1I5h8wdJluu6JwBcJzkh6TiAKEmnbWNV0ibJ7yRfSHo+ODi4RtJvxO2Cp6en7VQqNQzgrqRRALGw24R8KwN4T/J+Pp+fHx8f90xMAM5ms9bY2Nhpz/MeSTpD0j4gNAiTZCT6YNv2ZDqdXjCZB+DFxcU+y7Iek7wKIIBKAtmiVOhZTXGepJcAbmcyma80D1WtVm9JmgIQD65BwnEc1Gq14IBOKySuRPJBJBJ5wpWVleFarfaMZNowDSgSiaCnpweVSgWlUgm+77dkb2Isy0I8Hkc0GsX6+jqq1aqJkaSPjuPcYC6XywKYJHmsIUFjUyKRQKFQaIE3Qzv8LwJ4RNd1ZyRdaLZUp82e58G27SDTMGg9sRrJtwb8DYDxa8sKg5fLZcRisY7QBkDSDwM2PoyGPVADbmDJZDLQsaurCxsbGzCHtGvfxNg04AKAQN9OcHP93t7eQIJisRg8lpFlHzsG4M8A+v9nxg0p3ki62N4PDquxpJ3Ha7fbfpY7oCt27BZWIEfw8V6BNEoawJSk+FEqz7Is05d3Stpc3XXdfpJPJV0CYB2yV5hePAPg5tDQ0JcAbBp8LpcbJfkQwCnTNv+lu9Uny4Lv+3cymcy73bZZh9vLy8vDku4BOHuYRj8wMDBPcq/RN5WitbS01EfymqQJU+qS/hhNdUtVAPx9NDUXyNzcXLy7uzsF4ArJc/VhmqzH/ALwSdIsgFedhulvq1cFmXTCMmQAAAAASUVORK5CYII=\"","import React, { useState, useEffect, useRef } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport useServiceHooks from \"@hooks/useServiceHooks\";\r\nimport { observer, inject } from \"mobx-react\";\r\n\r\nimport { Toast } from \"antd-mobile\";\r\nimport searchImg from \"../assets/search.png\";\r\nimport cancelImg from \"../assets/cancel.png\";\r\nexport type HeaderBarProps = {\r\n  goback?: string | (() => void);\r\n  title: string;\r\n  service?: string;\r\n  rightIcon?: Function;\r\n  search?: boolean;\r\n  userState?: any;\r\n  friendResult?: any;\r\n  setFriendResult?: any;\r\n  friendAccount?: any;\r\n  setFriendAccount?: any;\r\n  searchFriend?: any;\r\n};\r\nconst HeaderBar = (props: HeaderBarProps) => {\r\n  const {\r\n    userState,\r\n    friendResult,\r\n    setFriendResult,\r\n    friendAccount,\r\n    setFriendAccount,\r\n    searchFriend,\r\n  } = props;\r\n\r\n  const [isOnFocus, setIsOnFocus] = useState<boolean>(false);\r\n  let history = useHistory();\r\n  let { onService } = useServiceHooks();\r\n  const { goback, title, service, rightIcon, search } = props;\r\n  const to = () => {\r\n    setFriendAccount(\"\");\r\n    setIsOnFocus(false);\r\n    if (typeof goback === \"function\") {\r\n      goback();\r\n    } else {\r\n      if (goback) {\r\n        history.replace(goback);\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <header className=\"add_friend_header\">\r\n      <ul className=\"add_friend_container \">\r\n        {goback && <li className=\"add_friend_goback\" onClick={to}></li>}\r\n        <li className=\"add_friend_title\">{title}</li>\r\n      </ul>\r\n      <form\r\n        onSubmit={(e) => {\r\n          e.preventDefault();\r\n          searchFriend(friendAccount);\r\n        }}\r\n        className=\"search_form\"\r\n      >\r\n        <input\r\n          type=\"text\"\r\n          className=\"add_friend_input\"\r\n          onFocus={() => setIsOnFocus(true)}\r\n          value={isOnFocus ? friendAccount : \"\"}\r\n          onChange={(e) => setFriendAccount(e.target.value)}\r\n        />\r\n        <button\r\n          className={`${isOnFocus ? \"search_button_focus\" : \"search_button\"}`}\r\n          type=\"submit\"\r\n        >\r\n          <img\r\n            src={searchImg}\r\n            alt=\"searchImg\"\r\n            className=\"searchImg\"\r\n            style={{ zIndex: -1 }}\r\n          />\r\n        </button>\r\n        {isOnFocus && (\r\n          <button\r\n            className=\"cancel_button_focus\"\r\n            onClick={() => setFriendAccount(\"\")}\r\n          >\r\n            <img src={cancelImg} alt={cancelImg} className=\"searchImg\" />\r\n          </button>\r\n        )}\r\n        {isOnFocus && (\r\n          <p\r\n            className=\"cancel_text_focus\"\r\n            onClick={() => {\r\n              setIsOnFocus(false);\r\n              setFriendAccount(\"\");\r\n            }}\r\n          >\r\n            取消\r\n          </p>\r\n        )}\r\n      </form>\r\n\r\n      <p className=\"add_friend_account\">我的账号: {userState.user.account}</p>\r\n    </header>\r\n  );\r\n};\r\n\r\nexport default inject(\"userState\")(observer(HeaderBar));\r\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAXCAYAAAAP6L+eAAADqElEQVRIS62VS2hcZRTH///v3hmHaNXaBmdiBDci+OhGxQctuvCFioYaH8WNSWa8M0kzmFEIgra3aBcWMdpm4r0zhCj2QSeLuhJsEkQQulEXVsGVaKt5WEyiNhNnMvc78g0zYdKHZILf8rvn/L5zz+N/iEsc3/dDQRDcqZR6gOQtInIdSQXgTwC/ADhVqVS+7OvrO38pf3PHxg+u66q2trZtAAZEZAeATQB+E5GzJCsAYgBurDqSPwA4OD09fdJ13fKFD6yCXde1o9FoB8n9JK8QkeMkj5GcsW27VC6XpVQqhS3LukYp9ZhSKi4i15McWVxcfH9wcPDvRngVbCKNRqM7SX5I8vsgCAbn5ua+dV3XRHnRMfatra03WJa1l2QngCyA/Y7jFOvGVbDneXeRPArg1yAI4r29vT9dLneN96Ojo5tWVlbeIvmSiOyempo6Nj4+HlRTZQqltf5IKbVdKbUzkUh8sx5o3cb3/a0icphkFMBTjuOcqYLz+fyOIAiOKKU+npiYcOsvNgnvAJADsHdycjJnGPQ87w2S/QAechzndDPAuu3Q0NC1LS0tnwJYrlQqz5o2NODDAG4ul8tPptPpcxsBGx/f90dE5FHLsu5PJBJzJsefAThfKpXi6XT6r42CPc8bJLm7XC4/3N/f/6OJ+CTJc7ZtJ3t6etb0YjOP+L7/KoBXADxuUspcLjcuIpsty3ouHo/PNwNrtPV9/x0AL4RCoe3d3d1nTSreBdCptX4wlUr9vBGw67rhWCw2bka+WCw+MjAwsGhS0WnGUkReSyaTnwCQZuHZbPZu27aPAxifmZl502gHh4eHt4TD4RNa65CIPJ1KpX5vBlwoFMLz8/MHSO4SkSeSyeTXq+rmed4ukgdF5EixWHw9k8ksrwdeKBSshYWF5wF8oLXOLS8vv133rWrF2NhYpFQqmZl/GcChpaWl9zKZzH8WshbpMyQPADBiZcZ5dcBWZXNkZGSzUmpfTVA+J5kH8FWjYtWU0I7FYttExPxlDwALQMhoGYB9juOYZbBW6LPZ7FW2bb8IIFMT+dNGRrXWZ4zQi0iU5K0AbgewBUCe5CkR2QPgtppe7DHwNRukHlF7e/tNWusOU8zaxjBrqX4WROQLETkaiUS+6+rq+iefz9+rtR5uhF8ErnubwszOzl4J4OpIJLI1CIKw1nqe5B+VSqWYTqdLDY8ZlbxHa31IRO4w7XtZ8Hq64kIbz/PuIzlklu7/CjY1y+Vypgb4F1iFodf+xjCSAAAAAElFTkSuQmCC\"","import React, { useState, useEffect } from \"react\";\r\nimport Header from \"@components/header\";\r\nimport {\r\n  friendsAdded,\r\n  requestAddFriend,\r\n  searchFriendByAccount,\r\n} from \"../request\";\r\nimport { observer, inject } from \"mobx-react\";\r\nimport defaultAvatar from \"@pages/my/assets/avatar.png\";\r\nimport \"./AddFriend.scss\";\r\nimport { Toast } from \"antd-mobile\";\r\nimport AddFriendHeader from \"./AddFriendHeader\";\r\nimport searchImg from \"../assets/search2.png\";\r\ntype AddFriendProps = {\r\n  display: boolean;\r\n  setDisplay: Function;\r\n  userState?: any;\r\n};\r\nfunction AddFriend(props: AddFriendProps) {\r\n  const { userState } = props;\r\n  const { display, setDisplay } = props;\r\n  const [friendResult, setFriendResult] = useState<[]>([]);\r\n  const [friendAccount, setFriendAccount] = useState<string>(\"\");\r\n  const {\r\n    user: { imgUrl },\r\n  } = userState;\r\n  const addFriendByUid = async (uid: number) => {\r\n    Toast.loading(\"添加中\");\r\n\r\n    requestAddFriend(uid.toString()).then((res) => {\r\n      Toast.success(\"添加成功\");\r\n      setFriendResult([]);\r\n      setDisplay(false);\r\n    });\r\n  };\r\n  const searchFriend = async (account: string) => {\r\n    //request account\r\n    if (account) {\r\n      Toast.loading(`搜寻${account}`, 0.7);\r\n      setFriendAccount(\"\");\r\n      const res = await searchFriendByAccount(account);\r\n      const data = await res.data;\r\n      setFriendResult(data);\r\n      if (data.length === 0) Toast.info(\"无结果\", 0.7);\r\n    }\r\n    return;\r\n  };\r\n\r\n  return (\r\n    <div\r\n      className={\r\n        display ? \"create_group_container addGroup\" : \"create_group_container\"\r\n      }\r\n    >\r\n      <AddFriendHeader\r\n        searchFriend={searchFriend}\r\n        friendAccount={friendAccount}\r\n        setFriendAccount={setFriendAccount}\r\n        friendResult={friendResult}\r\n        setFriendResult={setFriendResult}\r\n        search\r\n        title=\"添加朋友\"\r\n        goback={() => setDisplay(false)}\r\n      />\r\n      <div className=\"add_friend_content\">\r\n        {friendAccount && (\r\n          <div\r\n            className=\"single_friend\"\r\n            onClick={() => searchFriend(friendAccount)}\r\n          >\r\n            <div className=\"avatar_search\">\r\n              <img src={searchImg} alt=\"searchImg\" />\r\n            </div>\r\n            <div className=\"single_friend_content\">\r\n              <p className=\"search_friend_name\">\r\n                搜索:{\" \"}\r\n                <span className=\"search_friend_text\"> {friendAccount}</span>\r\n              </p>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {friendResult.length > 0 &&\r\n          friendResult.map((item) => {\r\n            const { account, name, uid, avatar } = item;\r\n\r\n            return (\r\n              <div className=\"single_friend\" key={uid}>\r\n                <div className=\"avatar\">\r\n                  <img\r\n                    src={`${imgUrl}${avatar}`}\r\n                    alt=\"\"\r\n                    onError={(e: any) => {\r\n                      e.target.onerror = null;\r\n                      e.target.src = defaultAvatar;\r\n                    }}\r\n                  />\r\n                </div>\r\n                <div className=\"single_friend_content\">\r\n                  <p className=\"friend_name\">{name}</p>\r\n                  <button\r\n                    className=\"agree_button\"\r\n                    onClick={() => addFriendByUid(uid)}\r\n                  >\r\n                    添加\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            );\r\n          })}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default inject(\"userState\")(observer(AddFriend));\r\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACIAAAAkCAYAAADsHujfAAAE8klEQVRYR8WYZ4idVRCGn7H3rlixF1RU7IIKth927AVEiSUktqhosFeCMcYWC1gQFYMtkGgU7BVbLEQTxILYEnuPGuvIc50v3Gx2N7ubXTzwsbv3fmfOe6a8884GPViZuQiwBrAKsBqwArAcsBjwJ/AD8A3wOTAdmBYR3/XA9KxXoruXM9ODPHx7YDdga2BVYAHgn3q0MT+QBegt4HngaeBDP4sIv+t2dQokM/3cW+8JHApsBiwB+Lk3/QT4CvgNWBBYFlgTWBFYuD7/GHgIeAD4ICL+6g7JHEAKxEbA0cC+wAZ16OPAyxoFvgd+BTQ+H2Dolq6wbQnsAWwMfAs8Bdzpz4gwjJ2u2YAUCA0NBQ6oEDwKPNKA6M5Y7V8Z2KrA7FfgngNuBiZGhBeYY80C0uaJM4Ej6zb3AbcDUyPi77nFuf37zFypwnossCnwBnBxeWZmR1stIAXCjacDJ1SMbwF8pkeEidnrlZmLV3i93CaA4b0MmNTRZgPEDYcBZ1VV3AaMjojPen16hw2ZuShwMHBhJfNNwI0RYcLPXr6ZuT5wXZXog26KiKnzCqLZn5lWlXl3RoX8XOD+9rKOzFwSOAgYAfwOnA+M7Ws4ugKfmVaRl90ZuNUQRYTk11oC2bCSSM6w5i+PiPf7yxttXvHCg8srnwIXAY81/CKQXY0ZYLKaVHfMjXz6ArIKYhvgquKYUcC1TTkL5Jj68gtgSEQ825eDerInM5cHril6GAucHBH2qVZohgNnAy8BwyPCXjEgq8r5POC06kWDIsJG2QIyEjgOsFpGDER+tOWJpWz1ePEpFYF3GiBjgMMBWXRURHw0IO74jzjtSYMAy9dzhkXEpAbI1cBRwDhgZETYugdkFbkdD5xTzdMcebMBIuMNA54ALoiIlqsGYpW+kdRk8FdsJ83FzZETi8wEcEpEvDoQILSZmUvJU9XPzMnBEfF145H9gRtK9AyNiAkDCGSdYtfdAXuOEfi5AaJ2GA2oQyQbSUbh068rMxcCvPSlpeL8eXdE2FZa5asmHQIYIhudDU+92a+rzvFwtY5yQIqf3PQ0gSh8dyiaXw+wiq6IiB/7C0lmqmv3Ks/bSgQ0JiJmCaRGj0i9MqxqyuSxE9/buG1eAWWm4b8E2AV40t8b/mhsN0AcD7YoCSByK8fstju2YtjXVe1fSj8CsKtrV+36S7vNds1qMil29YygXtB9pTFbjak3q8KxebUPmVt6f1h6j4h3O9rqqOIdqETuDdYF3isRo4EvO96iM2BVHU6BDmPqX2WGUtQha7JtBJjQpUcao5npILV3VZElPaNYcGJ5SVXlPKOq17iXcbYx6Z1t3KPIcjJ0KjTntCGH+M7bxSXj2keLriY9PbNdjQOGywlOsWujshdNqwOaSW+ZOnQtYG3A6nOpbe4qIIcAB9Yw5mhxfelWbbRu0+nKTG+pwR2BnWpo8m87qEOS5W35mejKQOnbpb4wBC8CzwCvlfcM1anAPjW8v145OD4iZnQ7hGu1eGb1GsSdgR1B9YBekx+ceawsgalFJUWrbko7T2SmgLcFTqrQmwJ2Xtl84lyBtOWOVeWjR/SA3GMSmi8/Vaj01B8+nU0BbWBkceleWyrCK3sMpIsKMXz0ZvRoA2NbMWf06vh5AtIbXml/tzjGMDlemDv3/C9AKvf0hDnnlDnpfwPSBsZ/7Mz8FyCpwdmrUuqnAAAAAElFTkSuQmCC\"","import React, { useState, useEffect } from \"react\";\r\nimport \"./style.scss\";\r\nimport Header from \"@components/header\";\r\nimport AddFriend from \"./components/AddFriend\";\r\nimport NavBar from \"@components/navBar\";\r\nimport unique from \"@utils/getUniqueObjOfArray\";\r\nimport { sendMessage, agreeOrDeclineFriend, friendsAdded } from \"./request\";\r\nimport { observer, inject } from \"mobx-react\";\r\nimport Chat from \"../chat\";\r\nimport defaultAvatar from \"@pages/my/assets/avatar.png\";\r\nimport { Toast } from \"antd-mobile\";\r\nfunction Friends(props: any) {\r\n  const { friendsState, userState, msgState } = props;\r\n  const {\r\n    updateFriendsAdded,\r\n    friendsAddedData,\r\n    getUpdateFriendsAddedList,\r\n    init,\r\n    messagesHistory,\r\n    setCurrentChat,\r\n    friendsData,\r\n    getMessageHistory,\r\n    getFriendList,\r\n\r\n    isLastPage,\r\n    clearFriendHisotry,\r\n    myselfMsg,\r\n  } = friendsState;\r\n  const { setCurrentChatByMsgStore } = msgState;\r\n  const [page, setPage] = useState(1);\r\n  const [display, setDisplay] = useState(false);\r\n  const [displayChat, setDisplayChat] = useState(false);\r\n  const [check, setCheck] = useState<any>();\r\n  const [sentUserUid, setSentUserUid] = useState<number>();\r\n  const add = () => {\r\n    return <li className=\"add-cion\" onClick={() => setDisplay(true)}></li>;\r\n  };\r\n\r\n  const agreeOrDecline = async (status: number, id: number) => {\r\n    //filter\r\n    // friendUid: 81;\r\n\r\n    updateFriendsAdded(friendsAddedData.filter((item: any) => item.id !== id));\r\n\r\n    agreeOrDeclineFriend(status, id).then(() => {\r\n      getFriendList();\r\n    });\r\n    // 重新取得新朋友名单\r\n  };\r\n\r\n  const sendMsg = (msg: string, id: number) => {\r\n    //  消息类型（0：普通文字消息，1：图片消息，2：文件消息，3：语音消息，4：视频消息）\r\n    let postData = {\r\n      receiverUid: check.friendUid,\r\n      msgType: 0,\r\n      msgContent: msg,\r\n      reqNo: \"\",\r\n      timeStamp: 0,\r\n    };\r\n    myselfMsg(postData);\r\n    sendMessage(postData).then((res) => {\r\n      // updateMessages({\r\n      //   msgContent: msg,\r\n      //   senderUid: userState.user.uid,\r\n      //   createTime: new Date(),\r\n      // });\r\n    });\r\n  };\r\n\r\n  const checkFriend = (item: any) => {\r\n    setCheck(item);\r\n    setCurrentChat(item.friendUid);\r\n    setSentUserUid(item.friendUid);\r\n    setCurrentChatByMsgStore({ groupId: 0, id: item.friendUid });\r\n    getMessageHistory(item.friendUid);\r\n    setDisplayChat(true);\r\n  };\r\n\r\n  useEffect(() => {\r\n    //  只有第一次request friendList/friendAdded 并存到mobx\r\n    if (init) return;\r\n    //  朋友名单\r\n    getFriendList();\r\n    //  加我好友名单\r\n    getUpdateFriendsAddedList();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (!displayChat && check) {\r\n      setCurrentChat({ groupId: 0, id: 0 });\r\n      setCurrentChatByMsgStore({ groupId: 0, id: 0 });\r\n    }\r\n  }, [displayChat]);\r\n\r\n  return (\r\n    <>\r\n      <Header title=\"朋友\" rightIcon={add} />\r\n      <div className=\"friends_container\">\r\n        {/* 加好友请求 */}\r\n        {friendsAddedData.length > 0 &&\r\n          friendsAddedData.map((item: any, index: number) => {\r\n            const { id, user } = item;\r\n            const { name, avatar } = user;\r\n            const url = userState.user.imgUrl + avatar;\r\n\r\n            return (\r\n              <div className=\"single_friend\" key={index}>\r\n                <div className=\"avatar\">\r\n                  <img\r\n                    src={url}\r\n                    alt=\"\"\r\n                    onError={(e: any) => {\r\n                      e.target.onerror = null;\r\n                      e.target.src = defaultAvatar;\r\n                    }}\r\n                  />\r\n                </div>\r\n                <div className=\"single_friend_content\">\r\n                  <p className=\"friend_name\">{name}</p>\r\n                  <button\r\n                    className=\"agree_button\"\r\n                    onClick={() => agreeOrDecline(1, id)}\r\n                  >\r\n                    添加\r\n                  </button>\r\n                  <button\r\n                    className=\"decline_button\"\r\n                    onClick={() => agreeOrDecline(2, id)}\r\n                  >\r\n                    拒绝\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            );\r\n          })}\r\n        {/* 已是好友列表 */}\r\n        {friendsData.length > 0 &&\r\n          friendsData.map((item: any, index: number) => {\r\n            const { user } = item;\r\n            const { name, avatar } = user;\r\n            const url = userState.user.imgUrl + avatar;\r\n            return (\r\n              <div\r\n                className=\"single_friend\"\r\n                key={index}\r\n                onClick={() => checkFriend(item)}\r\n              >\r\n                <div className=\"avatar\">\r\n                  <img\r\n                    src={url}\r\n                    alt=\"\"\r\n                    onError={(e: any) => {\r\n                      e.target.onerror = null;\r\n                      e.target.src = defaultAvatar;\r\n                    }}\r\n                  />\r\n                </div>\r\n                <div className=\"single_friend_content\">\r\n                  <p className=\"friend_name\">{name}</p>\r\n                </div>\r\n              </div>\r\n            );\r\n          })}\r\n      </div>\r\n      <NavBar />\r\n      <AddFriend display={display} setDisplay={setDisplay} />\r\n      <Chat\r\n        id={check ? check.friendUid : 0}\r\n        page={page}\r\n        setPage={setPage}\r\n        isLastPage={isLastPage}\r\n        friendUid={sentUserUid}\r\n        clearHisotry={clearFriendHisotry}\r\n        datas={messagesHistory}\r\n        sendMsg={sendMsg}\r\n        display={displayChat}\r\n        setDisplay={() => setDisplayChat(false)}\r\n        getHistory={getMessageHistory}\r\n        title={check?.user.name || \"\"}\r\n      />\r\n    </>\r\n  );\r\n}\r\n\r\nexport default inject(\r\n  \"friendsState\",\r\n  \"msgState\",\r\n  \"userState\"\r\n)(observer(Friends));\r\n","import React, { useState, useEffect } from \"react\";\r\nimport Header from \"@components/header\";\r\nimport { observer, inject } from \"mobx-react\";\r\nimport { uploadImg, add } from \"../request\";\r\nimport choosen from \"../assets/choosen.png\";\r\nimport camera from \"../assets/camera.png\";\r\nimport \"./CreateGroup.scss\";\r\nimport { Toast } from \"antd-mobile\";\r\nimport defaultAvatar from \"@pages/my/assets/avatar.png\";\r\ntype CreateGroupProps = {\r\n  display: boolean;\r\n  setDisplay: Function;\r\n  friendsState?: any;\r\n  refreshData: Function;\r\n};\r\nfunction CreateGroup(props: CreateGroupProps | any) {\r\n  const { display, setDisplay, friendsState, userState, refreshData } = props;\r\n  const { friendsData, init, getFriendList } = friendsState;\r\n  const { user } = userState;\r\n  const [isInput, setIsInput] = useState(false);\r\n  const [groupInfo, setGroupInfo] = useState({\r\n    avatar: \"\",\r\n    name: \"\",\r\n  });\r\n\r\n  const [isChoose, setisChoose] = useState<any>({});\r\n  const [count, setCount] = useState(0);\r\n\r\n  const chooseFriends = (id: number) => {\r\n    let obj = isChoose;\r\n    if (isChoose[id]) {\r\n      delete obj[id];\r\n      setisChoose({ ...obj });\r\n    } else setisChoose({ ...isChoose, [id]: id });\r\n  };\r\n  useEffect(() => {\r\n    setCount(Object.keys(isChoose).length);\r\n  }, [isChoose]);\r\n  useEffect(() => {\r\n    //  若登入没有去朋友reset过 从这reset\r\n    if (init) return;\r\n    //  朋友名单\r\n    getFriendList();\r\n  }, []);\r\n  const onChange = (e: any) => {\r\n    if (!e.target.files) return;\r\n    const file = e.target.files[0];\r\n    let data = new FormData();\r\n    data.append(\"file\", file, file.name);\r\n    Toast.loading(\"正在上传中...\", 0);\r\n    uploadImg(data).then((res) => {\r\n      const { data } = res.data;\r\n      setGroupInfo({ ...groupInfo, avatar: data.url });\r\n      Toast.success(\"上传成功\");\r\n    });\r\n  };\r\n  const changeName = (e: any) => {\r\n    setGroupInfo({ ...groupInfo, name: e.target.value });\r\n  };\r\n  const addGroup = () => {\r\n    if (!groupInfo.avatar) {\r\n      Toast.fail(\"请上传群图标!\");\r\n      return;\r\n    }\r\n    if (!groupInfo.name) {\r\n      Toast.fail(\"请输入群组名称!\");\r\n      return;\r\n    }\r\n    const ids = Object.keys(isChoose);\r\n    add({\r\n      avatar: groupInfo.avatar,\r\n      name: groupInfo.name,\r\n      ids: ids.join(\",\"),\r\n    }).then((res) => {\r\n      Toast.success(\"创建成功\");\r\n      refreshData();\r\n      setDisplay(false);\r\n      // 清空\r\n      setGroupInfo({\r\n        avatar: \"\",\r\n        name: \"\",\r\n      });\r\n      setisChoose({});\r\n    });\r\n  };\r\n  return (\r\n    <div\r\n      className={\r\n        display ? \"create_group_container addGroup\" : \"create_group_container\"\r\n      }\r\n    >\r\n      <Header title=\"创建群组\" goback={() => setDisplay(false)} />\r\n      {/* 创建群组 */}\r\n      <div className=\"create_newgroup\">\r\n        <div className=\"avatar avatar_create\">\r\n          <input\r\n            type=\"file\"\r\n            accept=\"image/png, image/jpeg, image/gif, image/jpg\"\r\n            multiple={false}\r\n            onChange={(e) => onChange(e)}\r\n          />\r\n          {groupInfo.avatar ? (\r\n            <>\r\n              <img\r\n                src={user.imgUrl + groupInfo.avatar}\r\n                alt=\"camera\"\r\n                className=\"camera\"\r\n              />\r\n            </>\r\n          ) : (\r\n            <>\r\n              <img src={camera} alt=\"camera\" className=\"camera\" />\r\n              <p className=\"camera_name\"> 更换 </p>\r\n            </>\r\n          )}\r\n        </div>\r\n        {!isInput && (\r\n          <div className=\"create_content\" onClick={() => setIsInput(true)}>\r\n            群名14个字以内\r\n          </div>\r\n        )}\r\n        {isInput && (\r\n          <input\r\n            autoFocus\r\n            className=\"create_input\"\r\n            value={groupInfo.name}\r\n            onChange={changeName}\r\n          ></input>\r\n        )}\r\n        {<button onClick={addGroup}>创建</button>}\r\n      </div>\r\n      {/* 朋友名单 */}\r\n      <div className=\"newgroups_container\">\r\n        {friendsData.map((item: any) => {\r\n          return (\r\n            <div\r\n              className=\"single_newgroup\"\r\n              key={item.friendUid}\r\n              onClick={() => chooseFriends(item.friendUid)}\r\n            >\r\n              <div\r\n                className={`${\r\n                  isChoose[item.friendUid] ? \"friendsChoosen\" : \"option\"\r\n                }`}\r\n              >\r\n                {isChoose[item.friendUid] && (\r\n                  <img src={choosen} alt=\"choosen\" />\r\n                )}\r\n              </div>\r\n              <div className=\"avatar\">\r\n                <img\r\n                  src={item.user.avatar}\r\n                  alt=\"\"\r\n                  onError={(e: any) => {\r\n                    e.target.onerror = null;\r\n                    e.target.src = defaultAvatar;\r\n                  }}\r\n                />\r\n              </div>\r\n              <div className=\"single_newgroup_content\">\r\n                <p className=\"newgroup_name\">{item.user.name}</p>\r\n              </div>\r\n            </div>\r\n          );\r\n        })}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default inject(\"friendsState\", \"userState\")(observer(CreateGroup));\r\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAoCAYAAAC4h3lxAAAD5klEQVRYR+2YW6hVZRSFv9FNM0u7aEkXSZAuPib6YlRIliGEEZjgHTSCiEIlii5UYvRQSYQWaVZC9WKCFZUEkpRShokPXV6MHoqsSOlmV2cMmSd2m7XOWufs1d4Y54cNm73/Ndcc8zL+MX9xjC8d4/4zBKDXGRzKwP8mAxExH1gDnFID1C/A7cAmSVFjf+mWRkooIq4FXgCOAz6o4dBkOEogiyS9XmN/ZwAi4kRgAjAqX9xq8GzgCeBU4BZgG+CoFgWn7/crgWeA34DbgC/bPPS+H4D9kn7vD2BlBiLidGAFsBgYV2Lsp9yzXtJfVRGNCGfK9h4DTivZ/zXwPPCIpINlNusAuB+4G/gYeBf4s82YnfkIeLEqWq3PRcRJwE3AZcCRNpsnANOASxPAfZ0A+AL4A5gB+HvROjKYZowIB9ABKFrnA28BIyWd2wmAw8AbwHxJP1eVR1P/R8QIYCNwvaThnQD4FXg1GaMWgOybi4HxwBmAa9jZ+1TS90XORMRIYCbwmaR9CWA9cEMTAF4DFlZlIOt6drKRqdJR7GMeZ/JD4Clgc3u/RMRUYBew1U4DjvoGYHZXAGTE7gVuBX4EdialfgucBVydjWnWWQs80BqQiBiTTLbDZ0Pa6w6AiDBrmKnuScf9fVdrY2fDOsqrE8jDwEOS2lntaIV1G8DlwBbgc2COpP1lTRcRFwAvA5dkfW8v6QmX33+fgYgYliUxB7hR0ptVTBQRLqdX8nOzJBPFv1bXMhARPp3fTzkwQ5Lrv9+VjGNqvhCYIumrXgKYBOwG1gF3ltV02yl8fPaCddBU02YvAUwB3gH6mrJSHmdD3wVYIkyX9F4vAVwE7AGes8aXZNlRVUJmrUeBpcBkSdZZPeuBscAOwLL3iv6UY5+HETEaMPv49J0m6UAvATia5nbXsxnFErgqA/NyHngaWFmUta6xUB46bmRPVp4F5koqncoiwvL5pZQZsyTt7ek50FIWC4AnAZeDJYXPAw86BmXW8ax8DbAqB6M7fFCVyfCuZiCz4FIyiAdTgboxXeffAWcCVwHO1CHroHS+UEakve6cxAXNZxW6BJgFnJMDiyeub7LMLA92Vw1ATWfA84DltK9DKlfKCw/7VqGOvmcAq9IDkjzIV66IODm1UMfzgJ1+O5uz1kBT6V2NDZmBTcB1kgymcNUZ6j/J6xQPGa7r9gG8hjsD3uI52Wp1M3BY0sROACzL6w8zikVbv/c0A3a1+AHfQ1mi+B5qhSTrrEFnwOlbCCwHziu5sGrI73/MWE/5sutx4FlJHkcHB6Bpz5q2V9kDTb+waXtDAJqO6EDtDWVgoBFrev/fMpTVONVMAO4AAAAASUVORK5CYII=\"","import React, { useEffect, useState } from \"react\";\r\nimport Header from \"@components/header\";\r\nimport NavBar from \"@components/navBar\";\r\nimport CreateGroup from \"./components/CreateGroup\";\r\nimport { sendGroupMsg } from \"./request\";\r\nimport { clearMsgByGroup } from \"@pages/messages/request\";\r\nimport { observer, inject } from \"mobx-react\";\r\nimport Chat from \"../chat\";\r\nimport \"./style.scss\";\r\nimport defaultAvatar from \"@pages/my/assets/avatar.png\";\r\nfunction Groups(props: any) {\r\n  const [display, setDisplay] = useState(false);\r\n  const [displayChat, setDisplayChat] = useState(false);\r\n  const [page, setPage] = useState(1);\r\n  const [check, setCheck] = useState<GroupInterface.Group>();\r\n  const { groupsState, msgState, userState } = props;\r\n  const { setCurrentChatByMsgStore } = msgState;\r\n  const {\r\n    getGroupList,\r\n    groupHisotrys,\r\n    groupsData,\r\n    init,\r\n    messagesHistory,\r\n    setCurrentChat,\r\n    clearGroupHisotry,\r\n    isLastPage,\r\n    myselfMsg,\r\n  } = groupsState;\r\n  const add = () => {\r\n    return <li className=\"add-cion\" onClick={() => setDisplay(true)}></li>;\r\n  };\r\n\r\n  const sendMsg = (msg: string) => {\r\n    //  消息类型（0：普通文字消息，1：图片消息，2：文件消息，3：语音消息，4：视频消息）\r\n    let postData = {\r\n      groupId: check?.group.groupId,\r\n      msgType: 0,\r\n      msgContent: msg,\r\n    };\r\n    myselfMsg(postData);\r\n    sendGroupMsg(postData).then((res) => {});\r\n  };\r\n\r\n  const checkGroup = (item: GroupInterface.Group) => {\r\n    setCheck(item);\r\n\r\n    setCurrentChat(item.groupId);\r\n    setCurrentChatByMsgStore(item);\r\n    // groupHisotrys(item.group.groupId);\r\n    setDisplayChat(true);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (init) return;\r\n    getGroupList();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (!displayChat && check) {\r\n      clearMsgByGroup({ groupId: check?.groupId });\r\n      setCurrentChat({ groupId: 0, id: 0 });\r\n      setCurrentChatByMsgStore({ groupId: 0, id: 0 });\r\n    }\r\n  }, [displayChat]);\r\n\r\n  return (\r\n    <>\r\n      <Header title=\"群组\" rightIcon={add} />\r\n      <div className=\"groups_container\">\r\n        {groupsData.map((item: GroupInterface.Group) => {\r\n          const url = userState.user.imgUrl + item.group.avatar;\r\n          return (\r\n            <div\r\n              className=\"single_group\"\r\n              key={item.groupId}\r\n              onClick={() => checkGroup(item)}\r\n            >\r\n              <div className=\"avatar\">\r\n                <img\r\n                  src={url}\r\n                  alt=\"\"\r\n                  onError={(e: any) => {\r\n                    e.target.onerror = null;\r\n                    e.target.src = defaultAvatar;\r\n                  }}\r\n                />\r\n              </div>\r\n              <div className=\"single_group_content\">\r\n                <p className=\"group_name\">{item.group.name}</p>\r\n                <p className=\"group_remark\">{item.group.remark}</p>\r\n              </div>\r\n            </div>\r\n          );\r\n        })}\r\n      </div>\r\n      <NavBar />\r\n      <CreateGroup\r\n        display={display}\r\n        refreshData={getGroupList}\r\n        setDisplay={setDisplay}\r\n      />\r\n      <Chat\r\n        display={displayChat}\r\n        clearHisotry={clearGroupHisotry}\r\n        sendMsg={sendMsg}\r\n        datas={messagesHistory}\r\n        getHistory={groupHisotrys}\r\n        id={check ? check!.group.groupId : 0}\r\n        page={page}\r\n        setPage={setPage}\r\n        isLastPage={isLastPage}\r\n        setDisplay={() => setDisplayChat(false)}\r\n        title={check?.group.name || \"\"}\r\n        type={2}\r\n      />\r\n    </>\r\n  );\r\n}\r\n\r\nexport default inject(\"groupsState\", \"msgState\", \"userState\")(observer(Groups));\r\n","import { Data, Params } from \"src/request/entity.d\";\r\nimport { get, post } from \"src/request/api\";\r\n\r\nexport const getInfo = (uid: number) => {\r\n  return get(\"/api/user/personal\", { uid });\r\n};\r\nexport const changePwd = (data: any) => {\r\n  return post(\"/api/user/changePass\", data);\r\n};\r\nexport const changeName = (data: any) => {\r\n  return post(\"/api/user/changeName\", data);\r\n};\r\nexport const changeAvatar = (uid: number) => {\r\n  return get(\"/api/user/changeAvatar\", { uid });\r\n};","import React, { useEffect, useState } from \"react\";\r\nimport Header from \"@components/header\";\r\nimport { changePwd } from \"../request\";\r\nimport { Toast } from \"antd-mobile\";\r\nfunction ChangePassword(props: any) {\r\n  const { display, setDisplayPwd } = props;\r\n  const [done, setDone] = useState(false);\r\n  const [pwd, setPwd] = useState({\r\n    oldPwd: \"\",\r\n    newPwd: \"\",\r\n    confirmPwd: \"\",\r\n  });\r\n  const goBack = () => {\r\n    setPwd({ oldPwd: \"222\", newPwd: \"333\", confirmPwd: \"444\" });\r\n\r\n    debugger;\r\n    setDisplayPwd(false);\r\n  };\r\n  const rightIcon = () => {\r\n    return (\r\n      <button\r\n        className={\r\n          done ? \"right-icon right-icon-done\" : \"right-icon right-icon-no-done\"\r\n        }\r\n        onClick={confirm}\r\n        type=\"submit\"\r\n      >\r\n        完成\r\n      </button>\r\n    );\r\n  };\r\n  const confirm = () => {\r\n    const { newPwd, confirmPwd, oldPwd } = pwd;\r\n    if (oldPwd.length < 6 || newPwd.length < 6 || confirmPwd.length < 6) return;\r\n    if (newPwd === \"\" || confirmPwd === \"\" || oldPwd === \"\") return;\r\n    if (newPwd !== confirmPwd) {\r\n      Toast.fail(\"两次密码不一致\");\r\n      return;\r\n    }\r\n    changePwd({ pwd: pwd.confirmPwd }).then((res) => {\r\n      Toast.success(\"修改成功!\");\r\n\r\n      goBack();\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (\r\n      pwd.oldPwd.length >= 6 &&\r\n      pwd.newPwd.length >= 6 &&\r\n      pwd.confirmPwd.length >= 6\r\n    ) {\r\n      setDone(true);\r\n      return;\r\n    }\r\n    setDone(false);\r\n  }, [pwd.oldPwd, pwd.newPwd, pwd.confirmPwd]);\r\n  return (\r\n    <div\r\n      className={\r\n        display\r\n          ? \"pwd-modal display-pwd-modal\"\r\n          : \"pwd-modal undisplay-pwd-modal\"\r\n      }\r\n    >\r\n      <Header title=\"修改密码\" goback={goBack} rightIcon={rightIcon} />\r\n      <form>\r\n        <p className=\"pwd old-pwd\">\r\n          <span>旧密码</span>\r\n          <input\r\n            type=\"password\"\r\n            placeholder=\"请填写旧密码\"\r\n            onChange={(e) => setPwd({ ...pwd, oldPwd: e.target.value })}\r\n          />\r\n        </p>\r\n        <p className=\"pwd new-pwd\">\r\n          <span>新密码</span>\r\n          <input\r\n            type=\"password\"\r\n            placeholder=\"请填写新密码\"\r\n            onChange={(e) => setPwd({ ...pwd, newPwd: e.target.value })}\r\n          />\r\n        </p>\r\n        <p className=\"pwd new-pwd\">\r\n          <span>确认密码</span>\r\n          <input\r\n            type=\"password\"\r\n            placeholder=\"请再次输入新密码\"\r\n            onChange={(e) => setPwd({ ...pwd, confirmPwd: e.target.value })}\r\n          />\r\n        </p>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ChangePassword;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport NavBar from \"@components/navBar\";\r\nimport avatar from \"./assets/avatar.png\";\r\nimport pencil from \"./assets/pencil.png\";\r\nimport headset from \"./assets/headset.png\";\r\nimport link from \"./assets/link.png\";\r\nimport { uploadImg } from \"../groups/request\";\r\nimport { changeName } from \"./request\";\r\nimport ChangePwd from \"./components/ChangePassword\";\r\nimport lock from \"./assets/lock.png\";\r\nimport { observer, inject } from \"mobx-react\";\r\nimport \"./style.scss\";\r\nimport { Toast } from \"antd-mobile\";\r\nimport { CopyToClipboard } from \"react-copy-to-clipboard\";\r\nimport fuzhi from \"./assets/fuzhi.png\";\r\n\r\nconst host = window.location.hostname;\r\nconst My = (props: any) => {\r\n  const { userState } = props;\r\n  const { updateUser, user } = userState as any;\r\n  const [display, setDisplay] = useState(false);\r\n  const [displayPwd, setDisplayPwd] = useState(false);\r\n  const [name, setName] = useState(\"\");\r\n  const onChange = (e: any) => {\r\n    if (!e.target.files) return;\r\n    const file = e.target.files[0];\r\n    let data = new FormData();\r\n    data.append(\"file\", file, file.name);\r\n    Toast.loading(\"正在上传中...\", 0);\r\n    uploadImg(data).then((res) => {\r\n      const { data } = res.data;\r\n      updateUser({ ...user, avatar: data.url });\r\n      avatarEdit(data.url);\r\n      Toast.success(\"更新头像成功\");\r\n    });\r\n  };\r\n  const inputName = () => {\r\n    setDisplay(!display);\r\n  };\r\n  const avatarEdit = (avatar: string) => {\r\n    changeName({ avatar }).then((res) => {\r\n      Toast.success(\"修改头像成功\");\r\n    });\r\n  };\r\n  const nameEdit = () => {\r\n    Toast.loading(\"请求中...\");\r\n    changeName({ name }).then((res) => {\r\n      Toast.success(\"修改昵称成功\");\r\n      updateUser({ ...user, name });\r\n      setDisplay(false);\r\n    });\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div className=\"my_header\">\r\n        <div className=\"my_avatar\">\r\n          {userState.user.avatar ? (\r\n            <img\r\n              src={user.imgUrl + user.avatar}\r\n              alt=\"\"\r\n              onError={(e: any) => {\r\n                e.target.onerror = null;\r\n                e.target.src = avatar;\r\n              }}\r\n            />\r\n          ) : (\r\n            <img src={avatar} alt=\"avatar\" />\r\n          )}\r\n          {!user.avatar && <p>更换</p>}\r\n          <input\r\n            type=\"file\"\r\n            accept=\"image/png, image/jpeg, image/gif, image/jpg\"\r\n            multiple={false}\r\n            onChange={(e) => {\r\n              onChange(e);\r\n            }}\r\n          />\r\n        </div>\r\n        <div className=\"my_info\">\r\n          <div className=\"my_name\">\r\n            {!display && (\r\n              <h4>\r\n                {user.name}\r\n                <img src={pencil} alt=\"pencil\" onClick={inputName} />\r\n              </h4>\r\n            )}\r\n            {display && (\r\n              <form action=\"\" id=\"formid\" onSubmit={nameEdit}>\r\n                <input\r\n                  type=\"text\"\r\n                  value={name}\r\n                  autoFocus\r\n                  onChange={(e) => {\r\n                    setName(e.target.value);\r\n                  }}\r\n                  onBlur={nameEdit}\r\n                />\r\n                <input type=\"submit\" style={{ display: \"none\" }} />\r\n              </form>\r\n            )}\r\n\r\n            <p>\r\n              乐聊号: {user.account}\r\n              <CopyToClipboard\r\n                text={user.account}\r\n                onCopy={() => Toast.info(\"复制成功\")}\r\n              >\r\n                <img src={fuzhi} alt=\"复制\" className=\"copy-img\" />\r\n              </CopyToClipboard>\r\n            </p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div className=\"my_content\">\r\n        <div className=\"my_content_option\">\r\n          <img src={headset} alt=\"headset\" />\r\n\r\n          <div className=\"my_content_title\" onClick={() => setDisplayPwd(true)}>\r\n            <p>修改密码</p>\r\n          </div>\r\n        </div>\r\n        {/* <div className=\"my_content_option\">\r\n          <img src={lock} alt=\"lock\" />\r\n\r\n          <div className=\"my_content_title\">\r\n            <a target=\"_blank\" href={user.customer}>\r\n              联系客服\r\n            </a>\r\n          </div>\r\n        </div> */}\r\n        <div className=\"my_content_option\">\r\n          <img src={link} alt=\"link\" />\r\n\r\n          <div className=\"friends_link\">\r\n            <div>\r\n              <p>好友链接</p>\r\n              <CopyToClipboard\r\n                text={`${host}/#/r?${userState.user.account}`}\r\n                onCopy={() => Toast.info(\"复制成功\")}\r\n              >\r\n                <button>复制连接</button>\r\n              </CopyToClipboard>\r\n            </div>\r\n            <span>{`${host}/#/r?${userState.user.account}`}</span>\r\n          </div>\r\n        </div>\r\n        <button\r\n          className=\"my_logout\"\r\n          onClick={() => {\r\n            userState.logout();\r\n            window.location.reload();\r\n          }}\r\n        >\r\n          退出登录\r\n        </button>\r\n      </div>\r\n      <ChangePwd display={displayPwd} setDisplayPwd={setDisplayPwd} />\r\n      <NavBar />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default inject(\"userState\")(observer(My));\r\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAEEUlEQVRIS7WWX2ibZRTGn+e8+TfBm846BJ3/b8pqky+N20CmxTkUvBDEC2/Fiw1vpFUZ4rbOtbLOteKdMFBhN/5B60BhCAqCm65t0rQQ7cUEC2NzjrJuzga+5H2PvCEJWZas6ToD312+9/edc57nPC9xe34SBMEukrsBHMtmsycB2FZH8zbwJJVKbRWR9wE8RvJ3VR3KZrOnAbjm89cLlGQyuY3kEZJ3q+pJks8BWHLODeXz+V+aoesBVmAiMkGyzzn3iXNu1BizFcBhkpettYPN0FsFeth2X5mIPKiqV0jCOXcwDMNvY7HYsyTfU9XLxpjBmZmZeqW3ApRMJrPNOTehql0ist9au0hyVETut9YOh2E4GY1GdxpjDqvqPwAGc7ncKd/etQIrbTTGeNhGDysWi18VCoVSb29vEI1GfXvvU9X95XJ5MhaL7VTVMZJX/UxzudzptQDrMAAbSdZgYVWJ9NBIJHJURO5R1UPlcvkbY8zTInIEwBVjzLudAiszq1bWpar7wjD8ulAo1GA19bO/vz+jqp+q6gZVfRvATyKyF8CrAL7vBFgTiG/XzWAealKp1FMkP6r+9yKAHwHsAnBJREZWA9YrA9DlnGtXWQ024Nunqs4595kx5hUAD6jqrHPuzXw+f+ZmwNVm1rhETBAET5IcBxDxogFwB0nvx/ONm6cdcD2wAx7qReXVqapvNa65VsBGnzVKv1kglTb6ykRkXFV9ZRUYgGERuVa1QsV/dVU1Ldc1V9YMIzlMsiXMsxor/N9hjcBKxBhjfGu6W5j6BoG0q0xEhqampq5rY+PLvkLvncerebZJRN5ZWVmZbGHqljOz1kaMMcMArgHw66strFJhT0/P5kQi8THJJ5xzx4vF4t6FhYWlFsHsP2yA5FGSoqrDzrmEiOzzaiR5XSq0C3Zu2bKlPxaLfUmyG8BFVR0h+Xk2m11peKkGGydJr0ZVTdSk3yr32gKTyeQL1eV6iuQjzrl7RWSsVCodn5+f/7eF9L2powAOVqVfj55OrisMguA1AK/7A1R1geQYgEcBjJZKpS/i8Xifqn5Q3SDeZx52oJ3PVoMylUodEpGXRWT39PT0D319fclIJDIBYLOqngCwozqzkdrMVPVqc5KvBqobP51OH1PVAWvtS3Nzc7NeSB7q05rkdp9j1lofL+oF4mGqesNdpWNgJpM5EYbhw4uLi88vLy//WQvTVCqVJvkhyYecc9+R3FG9jb3R6jbWMTCdTv8MYEO5XN4TiUSWrLV3AugWkU0kn1HVF70ynXN5VfUR82ur+2bHwCAIzpK8C8AfABKqGvftqz7+nBiAsz7lZ2dnz6wHVjF+Op3+zR+qqhdIesNfAnABwF/W2vPlcvlcPB7/O5vNnlsvzAP/A/WImlyvd6FzAAAAAElFTkSuQmCC\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABAEAYAAAD6+a2dAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAAZiS0dEAAAAAAAA+UO7fwAAAAlwSFlzAAAASAAAAEgARslrPgAABF9JREFUeNrt3D9IG28YB/DnuSStFbUWrELQDmkKIlTMJYJGGimIUBw6FhyKikTpIjSKk4iDoIMgCBWldXCMXXSodBHFqqi5U4ODxdK/SUMRStWooOe9HaLDz/7SYnPxTX2fzxLihXufR77JvXfDA0AIIYQQQgghRCDIu4A/cQ27hl3DDx7oQT2oBysqwAte8JrNvOtKFqzHeqzf2sId3MGd2dnAZmAzsLm0lLT1eDccj8vj8rg8DQ1sj+2xvRcveNfDC2tn7ax9ZgZ7sAd7Hj9WVEVV1M+fjTq/xLvBePQ6vU6ve/iQdx28YS/2Ym9lJfjAB775eYfb4Xa4rVajzm/i3WA81pA1ZA3duRN7d/8+73q4W4AFWMjKQg011G7dikQikUhkbCzR06bsJaDIX+Qv8l+5kjaRNpE20dqKXvSi9949FmIhFrp8ewDswz7sM518IWU59nr9+i8fbIImaNJ1c4Y5w5xhtS7WLtYu1n779tfr8m6c/Jdj3jHvmLfbpXVpXVp/+xaGYAiGpF8v1eMwDuM1NUq+kq/kv3r1t+ul7B5AVCvuFfeK+907VsgKWeHWVrzPsSk2xaZu3Eh0PQpAqiqDMihjLO7xVmiFVkz4F5wCIDgKgOCStpuuZJWskpnNu3m7ebt5RUXSiDQijeTm8m442Vgn62SdHz4oiqIoyvv3J39liZ01eQwPQOwJnsMRbYm2RFv8fizAAiyw22P/GN7tXhzZL/tl/8yMRbNoFu3Ro0Rv15LFsEuAU3bKTtliYVEWZdGxMZiDOZiz23k3yMvpEzzNrtk1+7NnvOuJx7g9AAIC3r0be719m3djKSMIQQjW1Jw+2OJdzlmGBUAf0Af0gct/jT+3QRiEwatXM7VMLVNL/L7daBf2SJUts2W2rGmqpEqqZLHwbtwocq6cK+cWF8f2OmtrvOs5L7oNFBwFQHAUAMFRAARHARAcBUBwFADBUQAERwEQHAVAcBQAwVEABEcBEBwFQHAUAMFRAARHARAcBUBwFADBUQAERwEQHAVAcBSAVDUJkzD55Uvc49VQDdWfPiW6zKUbtXJZYBd2YdfTp6yf9bP+ly9xAzdw4+ZNqIIqqHr+XLWpNtU2O5voOvQLkKJi4+DevFE9qkf1WK1H20fbR9tZWYpNsSm2piaj1qEA/BN0PdgWbAu27e0ZfWYKgOAoAIK7sE0gNmMzNptMTp/T5/QFArwbN0wFVEDFtWvQDd3QzbuY8zMsAKYSU4mpZGeHAYP/nYeigALK6VQrp5N344aZhmmY/s3xk8GOB+GD8EE4GuVd7lmGjYrNyc7Jzsn+/t2Ubko3pT95AmEIQzgtjXeD3AUgAIGlpdXR1dHV0cFB3uWcZdge4HSXGhtw2NAApVAKpcbvWv8Z5VAO5V+/xkbber28y4knaaNiXfuufdd+QYFerBfrxVVV2IEd2HH5J4iwRtbIGj9+PD48Pjw+fP16DddwDX/84F0XIYQQQgghhBBCyE/IuHaT/cVd9gAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyMS0wMi0xMVQxOTozMjozMiswODowMB3nPZYAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMjEtMDItMTFUMTk6MzI6MzIrMDg6MDBsuoUqAAAASHRFWHRzdmc6YmFzZS11cmkAZmlsZTovLy9ob21lL2FkbWluL2ljb24tZm9udC90bXAvaWNvbl9oNW9pcWQ0MWwybS9mdXpoaS5zdmfbAlSqAAAAAElFTkSuQmCC\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACIAAAAiCAYAAAA6RwvCAAAFV0lEQVRYR82Yf0wTZxjH722phUiHDla1i9mmLf4BFttOKRVoZ3ALXZXogjKz1IME4jAkgzBJk2XLIknDwjBZzUKs/YGJQ8KPNFPcFNSjRZBqr52SJWvRkc0omm52wKUrV+5drqGkMZYeRcwuuVxz7/Wez/M+z/t9n+cAhJCN/A8OkCQIRBCEPhEAQOQKIQQL/tDX6G/GLi4XBAIAqOPHj+cPDQ19zGazpQCADbQ1iqKmKIpyKxSKzjNnzoxBCFnLAVoOCNy/f/9bPp+vfXp6+n0ej/csPT3dHgqFHkEIES6X+yZBEEUzMzPreTzeFYlEcqyzs/MPpjBMQWBubu67BEH8xOFwQpmZmSf1er1FpVKFYucewzCuTqer9Pv9X5IkyREIBOqRkZE7TGCYgMC9e/dum5iYuIUgyO8ajUZtMBgeIwhCT/2LDqqhoUHQ19d3GQDwtlAolA8MDPyWCCYhCIZhoKam5hcIYWpVVdUunU73LNFL6dzV6/XrzWazEwDwr9frzYsmd7zsTQQCCwoKqh4+fGgUiUSq69evOxhARG3Bffv2Fbvd7hsCgaDG6XSalvrvkiAAgPnt27ePIggyd/fuXdUS4YjnKJWXl2enJeLevXuKpaRiSZD+/v7X6urqnmRkZHzudru/SwZELBZ/RhBEy+nTp7NKS0uJ5YaGstlsGdeuXVPbbLbzMpnsQ5vN9vMywrIYnvLy8g9GR0cvq9VqrUKhuIii6D8vcuj5GaGTLLOjo+PrYDCIkiSZlp6ejhw6dGhnc3Ozm7FMxjyo0+mkvb29ToIgEA6HE0xNTbUePXr0K51O91esY7EgsKmpSdDV1TW0Zs2a17KystqKiop8FoulW6vV7mptbcWTAWlqapJZLJaxysrKcofDIfL7/Q1zc3PThw8fVra0tDyKwsSCUFu3br0DANhYWlpaaDAYJhsbG3dbrVYHiqIrAjGZTGMoiha1trberK2tfefq1asOCOHj+/fv74yGKQoClUrlJz6fr0MikSj7+/uHae8bGxsVLxlkhH6vWq0u8ng8WHZ2thbDsPORvXNhSVESieRHNpvNd7lc+Qv34CqBAFoWpFKpE0I4heN4GT0rERB6YMeOHb9CCO0ej+fThelaNRB6s5ZIJO0IghR6PJ6cCEMMyDgAwIHjeO2rAJFKpd9DCOkQ5S6C0IQymawPQZCNOI4XvIrQyGSyW/Pz84/cbvdHi6GhNySlUlnh8/nOS6XS4kuXLt1czWTVaDS7cRy3Z2dnH8EwrCs2WSNF1pYtW1wpKSkbxGKxqqenZ2I1lu/BgwdF4+PjN8Lh8JMHDx7Inl++kbKTFrQLFy7cSElJ4fP5fFrQvFar9YeXIWharfaIw+HY5vf768Ph8NOKior34glaBObUqVPrjEZjM0EQVSRJclksFi3x+W1tba5klDUq8cFgEGGxWKG1a9eaq6urv6ivrw/Ek/hYO9S5c+det9vtOycnJzPa29ttQqEwnAQIRFG0ZHBw8MqePXsqS0pKLmq12r+ZbHrP24q2DfHKwkRsVE5OTl0wGPzWbDa/oVKpZpZbBiQywHScLowGIYRpKyqMmFqL8xwsKysrcLlcw5s2bTp2+/ZtY9Kl4gpAoMlkWqfX68dYLBbp9XrFKy2ek2GBJ06c4Pf09FymKEooEonyX0o7wYBksQ/u7u7mGAyGI1NTUydDoVDa5s2bNcPDw04mJWaidiIRBywsLNQEAoEDaWlp/NnZ2V2BQCCLx+MNFBcXV589e/ZPJhC0kZWCUHK5/JvZ2dkDXC73KUmSo3K5vNdoNI6sZhMet3ehP0286s8SiUKV9Ph/pr4vUBWI+ckAAAAASUVORK5CYII=\"","export default \"data:image/png;base64,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\"","export default __webpack_public_path__ + \"static/media/guid.69c4c9d6.png\";","import React from \"react\";\r\nimport \"./style.scss\";\r\nimport guidImg from \"./assets/guid.png\";\r\nimport { Link } from \"react-router-dom\";\r\nfunction iosDownLoad() {\r\n  return (\r\n    <div className=\"iosdownload_bg\">\r\n      <img src={guidImg} alt=\"guidImg\" />\r\n      <Link to=\"/\">我知道了</Link>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default iosDownLoad;\r\n","import Chat from \"@pages/chat\";\r\nimport Login from \"@pages/login\";\r\nimport Register from \"@pages/register\";\r\nimport Messages from \"@pages/messages\";\r\nimport Friends from \"@pages/friends\";\r\nimport Groups from \"@pages/groups\";\r\nimport My from \"@pages/my\";\r\nimport iosDownLoad from \"@pages/iosDownload\";\r\nconst routeMap = [\r\n  // 登录\r\n  {\r\n    path: \"/login\",\r\n    name: \"login\",\r\n    component: Login,\r\n    auth: false,\r\n  },\r\n  // 注册\r\n  {\r\n    path: \"/r\",\r\n    name: \"register\",\r\n    component: Register,\r\n    auth: false,\r\n  },\r\n  // 注册\r\n  {\r\n    path: \"/chat\",\r\n    name: \"chat\",\r\n    component: Chat,\r\n    auth: true,\r\n  },\r\n  {\r\n    path: \"/\",\r\n    name: \"messages\",\r\n    component: Messages,\r\n    auth: true,\r\n  },\r\n  {\r\n    path: \"/friends\",\r\n    name: \"friends\",\r\n    component: Friends,\r\n    auth: true,\r\n  },\r\n  {\r\n    path: \"/groups\",\r\n    name: \"groups\",\r\n    component: Groups,\r\n    auth: true,\r\n  },\r\n  {\r\n    path: \"/my\",\r\n    name: \"my\",\r\n    component: My,\r\n    auth: true,\r\n  },\r\n  {\r\n    path: \"/iosdownload\",\r\n    name: \"iosdownload\",\r\n    component: iosDownLoad,\r\n    auth: false,\r\n  },\r\n];\r\nexport default routeMap;\r\n","import React from \"react\";\r\nimport { Toast } from \"antd-mobile\";\r\n\r\nimport { observer, inject } from \"mobx-react\";\r\nimport { Route, Redirect, useLocation } from \"react-router-dom\";\r\n\r\nimport routers from \"../routers\";\r\nconst AuthRoute = (props: any) => {\r\n const { userState } = props;\r\n const { pathname } = useLocation();\r\n let { user } = userState;\r\n const targetRoute: any = routers.find((item) => item.path === pathname)\r\n let { component } = targetRoute\r\n // 不需要拦截的页面直接放行\r\n if (targetRoute && !targetRoute.auth && !user.isLogin) {\r\n  return <Route path={pathname} component={component}></Route>\r\n }\r\n // 登录\r\n if (user.isLogin) {\r\n  return <Route path={pathname} component={component}></Route>\r\n } else {\r\n  // 未登录\r\n  return <Redirect to=\"/login\" />\r\n }\r\n}\r\nexport default inject('userState')((observer(AuthRoute)));\r\n","import React, { useEffect } from 'react';\r\nimport { Switch, } from \"react-router-dom\"\r\nimport AuthRoute from \"./utils/authRoute\"\r\nimport { addListenr } from \"@utils/observerListen\"\r\nimport './App.scss';\r\nimport { Toast } from 'antd-mobile';\r\nToast.config({ duration: 1.3 })\r\n\r\nconst App = (props: any) => {\r\n  useEffect(() => {\r\n    addListenr();\r\n  }, [])\r\n  return (\r\n    <>\r\n      <Switch>\r\n        <AuthRoute></AuthRoute>\r\n      </Switch>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default App;","import { observable, action, makeObservable} from \"mobx\";\r\n\r\nclass CommonState {\r\n  constructor() {\r\n    makeObservable(this)\r\n  }\r\n  @observable clientHeight = document.documentElement.clientHeight;\r\n  @observable footerHeight = 60;\r\n\r\n  @action updateFooterHeight = (num: number) => {\r\n    this.footerHeight = num;\r\n  }\r\n}\r\nexport default CommonState;","import { observable, action, makeObservable, autorun, computed } from \"mobx\";\r\nimport { listen } from \"@utils/observerListen\";\r\nimport { chatDateTimeFormate } from \"@utils/dataTime\";\r\n\r\nimport { groupList } from \"@pages/messages/request\";\r\n\r\nclass MessageState {\r\n  constructor() {\r\n    makeObservable(this);\r\n    autorun(() => {\r\n      // （-2: 登录异常, -1: 异地登录, 0: 心跳，1: 好友消息，2: 群消息，3: 好友请求消息，4: 好友同意消息，5: 加入群消息 6: 退群消息）\r\n\r\n      listen?.addEventListener(1, this.update);\r\n      listen?.addEventListener(2, this.updateGroup);\r\n      listen?.addEventListener(5, this.newGroup);\r\n      listen?.addEventListener(6, this.kickedByGroup);\r\n    });\r\n  }\r\n  @observable isLastPage: boolean = false;\r\n  @observable init: boolean = false;\r\n  @observable currentChat = { groupId: 0, id: 0 };\r\n  @observable msgHisotry: MessageStore.MsgHisotryKey = {};\r\n\r\n  // 退群消息\r\n  @action kickedByGroup = (res: any) => {\r\n    const {\r\n      user: { groupId },\r\n    } = res;\r\n    // 請求來的群 mobx上群的key\r\n    let key = 2 + \"-\" + groupId;\r\n    // 消息發來的時候mobx 群的key\r\n    let keyAddGroupKey = 5 + \"-\" + groupId;\r\n    let tempData = this.msgHisotry;\r\n    delete tempData[key];\r\n    delete tempData[keyAddGroupKey];\r\n    this.msgHisotry = tempData;\r\n  };\r\n\r\n  //  进群通知\r\n  @action newGroup = (response: any) => {\r\n    const { message, type, user, createTime } = response;\r\n    const data: MessageStore.MsgHisotry = {\r\n      id: user.groupId,\r\n      type: 2,\r\n      name: user.groupName,\r\n      remark: user.remark,\r\n      avatar: user.avatar,\r\n      groupAvatar: user.groupAvatar,\r\n      lastMsgContent: message.msgContent,\r\n      unMsgCount: 1,\r\n      modifiedTime: chatDateTimeFormate(createTime),\r\n      dataTime: createTime,\r\n    };\r\n    this.addHistoryItem(data);\r\n  };\r\n\r\n  // 朋友更新\r\n  @action update = (response: any) => {\r\n    const str = sessionStorage.getItem(\"user\") || \"\";\r\n    const loginUser = JSON.parse(str);\r\n    const { message, type, user, createTime } = response;\r\n    // debugger;\r\n    if (!message.receiveId || !user.uid) return;\r\n    const data: MessageStore.MsgHisotry = {\r\n      id: loginUser.uid === user.uid ? message.receiveId : user.uid,\r\n      type,\r\n      name: user.name,\r\n      remark: user.remark,\r\n      avatar: user.avatar,\r\n      lastMsgContent: message.msgContent,\r\n      unMsgCount: 1,\r\n      modifiedTime: createTime,\r\n      dataTime: createTime,\r\n    };\r\n\r\n    // 如果已经在聊天界面\r\n    if (this.currentChat.id === user.uid) {\r\n      data.unMsgCount = 0;\r\n      this.addHistoryItem(data);\r\n\r\n      return;\r\n    }\r\n    this.addHistoryItem(data);\r\n  };\r\n\r\n  // 群更新\r\n  updateGroup = (response: any) => {\r\n    const { message, type, user, createTime } = response;\r\n\r\n    const data: MessageStore.MsgHisotry = {\r\n      id: message.receiveId,\r\n      type,\r\n      name: user.name,\r\n      remark: user.remark,\r\n      avatar: user.avatar,\r\n      groupAvatar: user.groupAvatar,\r\n      lastMsgContent: message.msgContent,\r\n      unMsgCount: 1,\r\n      modifiedTime: chatDateTimeFormate(createTime),\r\n      dataTime: createTime,\r\n    };\r\n    if (this.currentChat.groupId === message.receiveId) {\r\n      data.unMsgCount = 0;\r\n      this.addHistoryItem(data);\r\n      return;\r\n    }\r\n    this.addHistoryItem(data);\r\n  };\r\n\r\n  @action initMessags = () => {\r\n    this.init = true;\r\n  };\r\n\r\n  @action setCurrentChatByMsgStore = (data: any) => {\r\n    this.currentChat = data;\r\n  };\r\n\r\n  @computed get total() {\r\n    let total = 0;\r\n    Object.keys(this.msgHisotry).map((key) => {\r\n      total = total + this.msgHisotry[key].unMsgCount;\r\n    });\r\n    return total;\r\n  }\r\n\r\n  addHistoryItem = (params: MessageStore.MsgHisotry) => {\r\n    const {\r\n      type,\r\n      id,\r\n      lastMsgContent,\r\n      modifiedTime,\r\n      unMsgCount,\r\n      groupAvatar,\r\n      dataTime,\r\n    } = params;\r\n\r\n    const { name, remark, avatar } = params;\r\n    let key = type + \"-\" + id;\r\n    let isLive = this.msgHisotry[key];\r\n    // 存在则更新\r\n    if (isLive) {\r\n      if (this.currentChat.id || this.currentChat.groupId) {\r\n        isLive.unMsgCount = isLive.unMsgCount = 0;\r\n      } else {\r\n        isLive.unMsgCount = isLive.unMsgCount + 1;\r\n      }\r\n      isLive.lastMsgContent = lastMsgContent;\r\n      isLive.modifiedTime = chatDateTimeFormate(modifiedTime);\r\n      return;\r\n    }\r\n\r\n    const data = {\r\n      id,\r\n      type,\r\n      name,\r\n      remark,\r\n      avatar,\r\n      groupAvatar,\r\n      lastMsgContent,\r\n      modifiedTime: chatDateTimeFormate(modifiedTime),\r\n      unMsgCount,\r\n      dataTime: dataTime,\r\n    };\r\n    this.msgHisotry[key] = data;\r\n  };\r\n}\r\nexport default MessageState;\r\n","import { observable, computed, action, makeObservable, autorun } from \"mobx\";\r\nimport { listen } from \"@utils/observerListen\";\r\nimport { Toast } from \"antd-mobile\";\r\nclass UserState {\r\n  constructor() {\r\n    makeObservable(this);\r\n    autorun(() => {\r\n      const userStr = sessionStorage.getItem(\"user\");\r\n      if (userStr) {\r\n        this.updateUser(JSON.parse(userStr));\r\n      }\r\n      listen.addEventListener(-1, this.remoteLogin);\r\n      listen.addEventListener(-2, this.logout);\r\n    });\r\n  }\r\n\r\n  // 下载连接显示\r\n  @observable showDownLoadLink = true;\r\n  @action setShowDownLoadLink = (param: boolean) => {\r\n    this.showDownLoadLink = param;\r\n  };\r\n  @observable isIosLink = false;\r\n  @action setIsIosLink = (param: boolean) => {\r\n    this.isIosLink = param;\r\n  };\r\n\r\n  @observable pullRed = {\r\n    recommendMatchNum: 0,\r\n    redListHits: 0,\r\n  };\r\n\r\n  @observable user: UserData = {\r\n    isLogin: false,\r\n    uid: \"\",\r\n    sid: \"\",\r\n    account: \"\",\r\n    avatar: \"\",\r\n    imgUrl: \"\",\r\n    ws: \"\",\r\n  };\r\n\r\n  @action logout = () => {\r\n    Toast.info(\"账号已退出\");\r\n    this.user.isLogin = false;\r\n    sessionStorage.clear();\r\n  };\r\n\r\n  //登录成功后更新用户\r\n  @action updateUser = (user: UserData) => {\r\n    this.user = user;\r\n    sessionStorage.setItem(\"user\", JSON.stringify(user));\r\n  };\r\n  // 异地登录\r\n  @action remoteLogin = (params: any) => {\r\n    console.log(params, \"您的账号异地登录\");\r\n    Toast.info(\"您的账号异地登录\");\r\n    this.user.isLogin = false;\r\n    sessionStorage.clear();\r\n  };\r\n}\r\nexport default UserState;\r\n","export const getUser = () => {\r\n let uesrStr = sessionStorage.getItem(\"user\");\r\n if (uesrStr) {\r\n  return JSON.parse(uesrStr)\r\n }\r\n return null;\r\n}","import { observable, computed, action, makeObservable, autorun } from \"mobx\";\r\nimport { getFriends, getMessagesHistory, friendsAdded } from \"./request\";\r\nimport { chatDateTimeFormate } from \"@utils/dataTime\";\r\nimport { listen } from \"@utils/observerListen\";\r\nimport { getUser } from \"@utils/storage\";\r\nclass FriendsState {\r\n  constructor() {\r\n    makeObservable(this);\r\n    autorun(() => {\r\n      // （-2: 登录异常, -1: 异地登录, 0: 心跳，1: 好友消息，2: 群消息，3: 好友请求消息，4: 好友同意消息，5: 加入群消息）\r\n      listen?.addEventListener(1, this.update);\r\n      // 加好友消息\r\n      listen?.addEventListener(3, this.reqAddedFriends);\r\n      //\r\n      listen?.addEventListener(4, this.getFriendList);\r\n    });\r\n  }\r\n\r\n  @observable isLastPage = false;\r\n  @observable init = false;\r\n  @observable currentChat = { id: 0 };\r\n  @observable friendsData: any = [];\r\n  @observable friendsAddedData: any = [];\r\n  // 聊天记录\r\n  @observable messagesHistory: any[] = [];\r\n  //更新用户\r\n  @action updateFriends = (friendsData: FriendsData) => {\r\n    this.friendsData = friendsData;\r\n  };\r\n\r\n  // 加我好友的用户名单\r\n  @action updateFriendsAdded = (friendsData: FriendsData) => {\r\n    this.friendsAddedData = friendsData;\r\n  };\r\n\r\n  // 朋友名单\r\n  @action getFriendList = () => {\r\n    getFriends().then((res) => {\r\n      this.friendsData = res.data;\r\n      this.init = true;\r\n    });\r\n  };\r\n\r\n  // 请求加我好友用户名单\r\n  @action getUpdateFriendsAddedList = () => {\r\n    friendsAdded().then((res) => {\r\n      this.friendsAddedData = res.data;\r\n    });\r\n  };\r\n\r\n  @action clearFriendHisotry = () => {\r\n    this.messagesHistory = [];\r\n  };\r\n\r\n  // 请求聊天历史\r\n  @action getMessageHistory = (id: number, page: number) => {\r\n    getMessagesHistory({ senderUid: id, page }).then((res: any) => {\r\n      let latest: [] = res.data;\r\n      let dataIndex;\r\n      this.isLastPage = res.finalPage;\r\n      if (this.messagesHistory.length > 0) {\r\n        let shift = this.messagesHistory[0];\r\n        latest.map((item: any, index: number) => {\r\n          if (item.msgId === shift.msgId) dataIndex = index;\r\n        });\r\n      }\r\n      if (dataIndex != undefined) {\r\n        latest = latest.slice(0, dataIndex) as [];\r\n      }\r\n      this.messagesHistory = [...this.messagesHistory, ...latest];\r\n    });\r\n  };\r\n\r\n  // 跟谁的聊天记录\r\n  @action setCurrentChat = (friendId: number) => {\r\n    this.currentChat.id = friendId;\r\n  };\r\n  @action update = (data: any) => {\r\n    const userStorage = getUser();\r\n    const { createTime, message, user, type } = data;\r\n\r\n    if (user.uid === userStorage.uid) return;\r\n    const latest = {\r\n      createTime,\r\n      msgId: message.receiveId,\r\n      msgContent: message.msgContent,\r\n      msgType: type,\r\n      senderUid: user.uid,\r\n      user,\r\n      modifiedTime: chatDateTimeFormate(createTime),\r\n      dataTime: createTime,\r\n    };\r\n    // 若在聊天室窗内则更新\r\n    if (this.currentChat.id === user.uid) this.messagesHistory.unshift(latest);\r\n  };\r\n  // socket 收到好友邀请\r\n  @action reqAddedFriends = (data: any) => {\r\n    const { createTime, message, user } = data;\r\n    let latest = {\r\n      createTime,\r\n      user,\r\n      uid: message.receiveId,\r\n      remark: null,\r\n      status: 0,\r\n      friendUid: user.uid,\r\n      id: message.ext,\r\n    };\r\n\r\n    this.friendsAddedData.push(latest);\r\n  };\r\n\r\n  @action myselfMsg = (msgData: any) => {\r\n    const userStorage = getUser();\r\n    const latest = {\r\n      createTime: new Date(),\r\n      msgId: msgData.receiveId,\r\n      msgContent: msgData.msgContent,\r\n      msgType: msgData.type,\r\n      senderUid: userStorage.uid,\r\n      user: {\r\n        ...userStorage,\r\n      },\r\n    };\r\n    this.messagesHistory.unshift(latest);\r\n  };\r\n}\r\nexport default FriendsState;\r\n","import { observable, computed, action, makeObservable, autorun } from \"mobx\";\r\nimport {\r\n  lists,\r\n  getGroupHisotrys,\r\n  getGroupMembersByGroupId,\r\n  deleteGroupMembers,\r\n  addGroupMembers,\r\n} from \"./request\";\r\nimport { listen } from \"@utils/observerListen\";\r\nimport { getUser } from \"@utils/storage\";\r\nclass GroupsState {\r\n  constructor() {\r\n    makeObservable(this);\r\n    autorun(() => {\r\n      // 2：群信息\r\n      listen?.addEventListener(2, this.update);\r\n    });\r\n  }\r\n  @observable isLastPage = false;\r\n  @observable init = false;\r\n  @observable currentChat = { groupId: 0 };\r\n  @observable groupsData = [];\r\n  @observable friendsAddedData: FriendsData = [];\r\n  // 群成員\r\n  @observable groupMembers: any = [];\r\n  // 聊天记录\r\n  @observable messagesHistory: any[] = [];\r\n\r\n  // 群裡面的成員\r\n  @action getGroupMembers = (groupId: number) => {\r\n    getGroupMembersByGroupId(groupId).then((res) => {\r\n      this.groupMembers = res.data;\r\n    });\r\n  };\r\n  // @action setGroupMembers = (data: any) => {\r\n  //   this.groupMembers = data;\r\n  // };\r\n  // 刪除群裡成員\r\n  @action getDeleteGroupMembers = (ids: string, groupId: number) => {\r\n    deleteGroupMembers(ids, groupId).then(() => {\r\n      // 刪除完重新拿群組成員\r\n      this.getGroupMembers(groupId);\r\n    });\r\n  };\r\n\r\n  // 加人進群\r\n  @action getAddGroupMembers = (ids: string, groupId: number) => {\r\n    addGroupMembers(ids, groupId).then(() => {\r\n      // 增加完重新拿群組成員\r\n      this.getGroupMembers(groupId);\r\n    });\r\n  };\r\n  //登录成功后更新用户\r\n  @action updateFriends = (friendsData: FriendsData) => {\r\n    // this.friendsData = friendsData;\r\n  };\r\n\r\n  @action updateFriendsAdded = (friendsData: FriendsData) => {\r\n    this.friendsAddedData = friendsData;\r\n  };\r\n\r\n  @action getGroupList = () => {\r\n    lists().then((res) => {\r\n      this.groupsData = res.data;\r\n      this.init = true;\r\n    });\r\n  };\r\n  @action setCurrentChat = (groupId: number) => {\r\n    this.currentChat.groupId = groupId;\r\n  };\r\n  @action clearGroupHisotry = () => {\r\n    this.messagesHistory = [];\r\n  };\r\n  @action groupHisotrys = async (id: number, page: number) => {\r\n    getGroupHisotrys({ groupId: id, page }).then((res: any) => {\r\n      let latest: [] = res.data;\r\n      let dataIndex;\r\n      this.isLastPage = res.finalPage;\r\n      if (this.messagesHistory.length > 0) {\r\n        let shift = this.messagesHistory[0];\r\n        latest.map((item: any, index: number) => {\r\n          if (item.msgId === shift.msgId) dataIndex = index;\r\n        });\r\n      }\r\n      if (dataIndex != undefined) {\r\n        latest = latest.slice(0, dataIndex) as [];\r\n      }\r\n      this.messagesHistory = [...this.messagesHistory, ...latest];\r\n    });\r\n  };\r\n  @action update = (data: any) => {\r\n    const userStorage = getUser();\r\n    const { createTime, message, user, type } = data;\r\n    if (\r\n      message.receiveId != this.currentChat.groupId ||\r\n      user.uid === userStorage.uid\r\n    )\r\n      return;\r\n\r\n    const latest = {\r\n      createTime,\r\n      groupId: message.receiveId,\r\n      msgContent: message.msgContent,\r\n      msgType: type,\r\n      senderUid: user.uid,\r\n      user,\r\n    };\r\n    this.messagesHistory.unshift(latest);\r\n  };\r\n  @action myselfMsg = (msgData: any) => {\r\n    const userStorage = getUser();\r\n    const latest = {\r\n      createTime: new Date(),\r\n      groupId: msgData.groupId,\r\n      msgContent: msgData.msgContent,\r\n      msgType: 2,\r\n      senderUid: userStorage.uid,\r\n      user: {\r\n        ...userStorage,\r\n      },\r\n    };\r\n    this.messagesHistory.unshift(latest);\r\n  };\r\n}\r\nexport default GroupsState;\r\n","import { observable, action, makeObservable } from \"mobx\";\r\nimport { sendSms } from \"./request\"\r\nclass RegisterState {\r\n constructor() {\r\n  makeObservable(this)\r\n }\r\n @observable phoneNumber = '';\r\n @observable step = 1;\r\n\r\n @action\r\n changeStep = (val: number) => {\r\n  this.step = val;\r\n }\r\n\r\n @action\r\n changePhoneNum = (val: string) => {\r\n  this.phoneNumber = val;\r\n }\r\n\r\n /**\r\n  *发送短信\r\n  */\r\n @action\r\n register = () => {\r\n  return sendSms({ mobilePhone: this.phoneNumber  })\r\n }\r\n}\r\nexport default RegisterState;","import CommonState from \"./common\";\r\nimport MsgState from \"./message\";\r\nimport UserState from \"./user\";\r\nimport FriendsState from \"../pages/friends/store\";\r\nimport GroupsState from \"../pages/groups/store\";\r\nimport RegisterState from \"@pages/register/store\";\r\nconst friendsState = new FriendsState();\r\nconst commonState = new CommonState();\r\nconst userState = new UserState();\r\nconst registerState = new RegisterState();\r\nconst msgState = new MsgState();\r\nconst groupsState = new GroupsState();\r\nconst store = {\r\n  commonState,\r\n  registerState,\r\n  userState,\r\n  msgState,\r\n  groupsState,\r\n  friendsState,\r\n};\r\n\r\nexport default store;\r\n","// In production, we register a service worker to serve assets from local cache.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\r\n// cached resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\r\n// This link also includes instructions on opting out of this behavior.\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n  // [::1] is the IPv6 localhost address.\r\n  window.location.hostname === '[::1]' ||\r\n  // 127.0.0.1/8 is considered localhost for IPv4.\r\n  window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/),\r\n);\r\n\r\nexport default function register() {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    //@ts-ignore\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebookincubator/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (!isLocalhost) {\r\n        // Is not local host. Just register service worker\r\n        registerValidSW(swUrl);\r\n      } else {\r\n        // This is running on localhost. Lets check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl);\r\n      }\r\n    });\r\n  }\r\n}\r\n//@ts-ignore\r\nfunction registerValidSW(swUrl) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then((registration) => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        //@ts-ignore\r\n        installingWorker.onstatechange = () => {\r\n          //@ts-ignore\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the old content will have been purged and\r\n              // the fresh content will have been added to the cache.\r\n              // It's the perfect time to display a \"New content is\r\n              // available; please refresh.\" message in your web app.\r\n              console.log('New content is available; please refresh.');\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch((error) => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n//@ts-ignore\r\nfunction checkValidServiceWorker(swUrl) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then((response) => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      //@ts-ignore\r\n      if (response.status === 404 || response.headers.get('content-type').indexOf('javascript') === -1) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then((registration) => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log('No internet connection found. App is running in offline mode.');\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then((registration) => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport { HashRouter as Router } from \"react-router-dom\";\r\nimport App from \"./App\";\r\nimport { Provider } from \"mobx-react\";\r\nimport Store from \"./store\";\r\nimport registerServiceWorker from \"./registerServiceWorker\";\r\nimport \"lib-flexible\";\r\nimport \"./index.scss\";\r\n// var VConsole = require(\"vconsole\");\r\n// var vConsole = new VConsole();\r\nconsole.log(\"Hello world\");\r\nReactDOM.render(\r\n  <Provider {...Store}>\r\n    <Router>\r\n      <App />\r\n    </Router>\r\n  </Provider>,\r\n  document.getElementById(\"root\")\r\n);\r\nregisterServiceWorker();\r\n","/*eslint-disable block-scoped-var, id-length, no-control-regex, no-magic-numbers, no-prototype-builtins, no-redeclare, no-shadow, no-var, sort-vars*/\r\n\"use strict\";\r\n\r\nvar $protobuf = require(\"protobufjs/light\");\r\n\r\nvar $root = (\r\n  $protobuf.roots[\"default\"] ||\r\n  ($protobuf.roots[\"default\"] = new $protobuf.Root())\r\n).addJSON({\r\n  protocol: {\r\n    options: {\r\n      optimize_for: \"SPEED\",\r\n      java_package: \"com.lmxdawn.him.common.protobuf\",\r\n    },\r\n    nested: {\r\n      WSBaseReqProto: {\r\n        fields: {\r\n          type: {\r\n            type: \"int32\",\r\n            id: 1,\r\n          },\r\n          uid: {\r\n            type: \"uint64\",\r\n            id: 2,\r\n          },\r\n          sid: {\r\n            type: \"string\",\r\n            id: 3,\r\n          },\r\n        },\r\n      },\r\n      WSBaseResProto: {\r\n        fields: {\r\n          type: {\r\n            type: \"int32\",\r\n            id: 1,\r\n          },\r\n          message: {\r\n            type: \"WSMessageResProto\",\r\n            id: 2,\r\n          },\r\n          user: {\r\n            type: \"WSUserResProto\",\r\n            id: 3,\r\n          },\r\n          createTime: {\r\n            type: \"string\",\r\n            id: 4,\r\n          },\r\n        },\r\n      },\r\n      WSMessageResProto: {\r\n        fields: {\r\n          receiveId: {\r\n            type: \"uint64\",\r\n            id: 1,\r\n          },\r\n          msgType: {\r\n            type: \"int32\",\r\n            id: 2,\r\n          },\r\n          msgContent: {\r\n            type: \"string\",\r\n            id: 3,\r\n          },\r\n          ext: {\r\n            type: \"string\",\r\n            id: 4,\r\n          },\r\n        },\r\n      },\r\n      WSUserResProto: {\r\n        fields: {\r\n          uid: {\r\n            type: \"uint64\",\r\n            id: 1,\r\n          },\r\n          name: {\r\n            type: \"string\",\r\n            id: 2,\r\n          },\r\n          avatar: {\r\n            type: \"string\",\r\n            id: 3,\r\n          },\r\n          remark: {\r\n            type: \"string\",\r\n            id: 4,\r\n          },\r\n          groupName: {\r\n            type: \"string\",\r\n            id: 5,\r\n          },\r\n          groupId: {\r\n            type: \"int32\",\r\n            id: 6,\r\n          },\r\n          groupAvatar: {\r\n            type: \"string\",\r\n            id: 7,\r\n          },\r\n          receiveAvatar: {\r\n            type: \"string\",\r\n            id: 8,\r\n          },\r\n        },\r\n      },\r\n    },\r\n  },\r\n});\r\n\r\nmodule.exports = $root;\r\n"],"sourceRoot":""}